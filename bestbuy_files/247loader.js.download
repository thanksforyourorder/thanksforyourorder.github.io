/*!
 * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an
 * unpublished, proprietary work which is fully protected under
 * copyright law. This code may only be used pursuant to a valid
 * license from 24/7 Customer, Inc.
 */
typeof SN=="undefined"&&(SN={}),SN.Utils=function(){function a(a){return a=="undefined"||a==null||a==="null"}function b(a,b){var c=[];return c.push(a),c.push("="),c.push(b),c.join("")}function c(){return parent.SN.Conf.startRunPollAuto}function d(a,b){var c=a.indexOf(b);return c>=0&&c+b.length==a.length?!0:!1}var e={undefinedOrNull:a,augmentKeyValuePair:b,isSubDomain:d,isEvalEnabled:c};return e}(),typeof SN=="undefined"&&(SN={}),function(){SN.Conf.FRAMEWORK_VERSION="v2.2",SN.Conf.CONST_PSP_ROOT=SN.Conf.pspRoot,SN.Conf.CUSTOM_TRACK_SERVER=SN.Conf.pspRoot,SN.Conf.CONST_PSP_CDN_ROOT=SN.Conf.cdnRoot,SN.Conf.PROXY_SERVER=SN.Conf.pspRoot+"/tps/tpsp.php",SN.Conf.CDN_DOMAIN=SN.Conf.cdnRoot+"/psp/",SN.Conf.CONST_247FWK_ID="247fwk.js",SN.Conf.PXOE_VERSION="7.2",SN.Conf.TRACKING_VERSION="1.0",SN.Conf.pspServerType||(SN.Conf.pspServerType="TIE"),SN.Conf.pspServerType=="TIE"?(SN.Conf.pspxdPath="/static/pspxd_2_0.html",SN.Conf.CONST_PSP_VERSION=="test"&&(SN.Conf.pspxdPath="/static/pspxd_2_0_d.html")):SN.Conf.pspxdPath="/pspxd_uno.html",SN.Conf.timeOutForBrowserGeoLocation=1e4,SN.Conf.pollingTime=1e4,SN.Conf.shouldLogInConsole=!1,SN.Conf.japCharMap={"0xff1f":"?","0xff0f":"/"},SN.Conf.blackListedVersions_browsers.browserLevel=SN.Conf.blackListedVersions_browsers.browserLevel.concat([]),SN.Conf.MAX_COOKIE_SIZE=2e3,SN.Conf.MAX_COOKIE_COUNT_THRESHOLD=54,SN.Conf.MIN_COOKIE_COUNT_THRESHOLD=49,SN.Conf.INVALID_COOKIE_CHARACTERS=["&",">","<","#",";","javascript","\0","script","ATTACK","REPLACE","STYLE","%2F","ALERT","TRACE","X_IGNORE","X-NADA:","GET","","%3C",")","(","%3E","APPEND","SCRIPT","attack","replace","style","append","alert","trace","x_ignore","get","x-nada:","%3c","%3e","%2f","JAVASCRIPT","","?","&lsquo;","?","&rsquo;","&lt;","&gt;"],SN.Conf.SOCIAL_BASE_URL=document.location.protocol+"//social.247-inc.com",SN.Conf.SOCIAL_STORE_ID="s51d520214c1b7",SN.Conf.customDataSizeInViStore=2,SN.Conf.ruleTypeMapping={button:"b",Btn:"b",btn:"b","":"p"},SN.Conf.viStoreName="sn.vi",SN.Conf.shouldMaintainVi=!0,SN.Conf.preConditionPollerEnabledForTP=!1,SN.Conf.delayEvalTriggerByMilliSeconds=5e3,SN.Conf.postConditionEvalPollingInterval=5e3;var b=["100001"];SN.Conf.triggerEvalForEvents_TIE=SN.Utils.undefinedOrNull(SN.Conf.triggerEvalForEvents_TIE)?[].concat(b):SN.Conf.triggerEvalForEvents_TIE.concat(b),SN.Conf.eventBasedEvalTriggerEnabled=SN.Utils.undefinedOrNull(SN.Conf.eventBasedEvalTriggerEnabled)?!1:SN.Conf.eventBasedEvalTriggerEnabled,SN.Conf.HLCachingEnabled=SN.Utils.undefinedOrNull(SN.Conf.HLCachingEnabled)?!1:SN.Conf.HLCachingEnabled,SN.Conf.tfsSendBatchProcessEnabled=SN.Utils.undefinedOrNull(SN.Conf.tfsSendBatchProcessEnabled)?SN.Conf.pspServerType=="OE":SN.Conf.tfsSendBatchProcessEnabled,SN.Conf.tfsSendBatchSize=3,SN.Conf.tfsSendPollerTimeOut_MilliSec=18e4,SN.Conf.tfsSendPollerInterval_MilliSec=3e3}(),SN.Constants=function(){var a={UNDEFINED_STR:"undefined",LOGLEVEL_ERROR:"e",LOGLEVEL_WARN:"w",LOGLEVEL_DEBUG:"d",LOGLEVEL_INFO:"i",IS_ENV_SUPPORTED_OR_NOT:"es",IS_CUSTOM_TRACKING_ENABLED:"cte",BROWSER_GEO_LOCATION:"bgl",KEY_VALUE_SEPERATOR:"||",KEY_VALUE_SEPERATOR_OLD:"#",KEY_SEPERATOR:"~",SN_AS_STORE_NAME:"sn.as",SN_VI_STORE_NAME:"sn.vi",SN_RN_STORE_NAME:"sn.rn",SN_ADP_STORE_NAME:"sn.adp",SN_DS_STORE_NAME:"sn.ds",CONST_SN_IFRAME_TAG:"sn_iframe",TRIGGER_EVAL_CALL:"evalToBeTriggered",PAGE_LOAD_EVENT_COMPLETE:"pageloadeventcomplete",PAGE_EVENT_VISIT_TO_TAGGED_PAGE:"100001",ENV_NOT_SUPPORTED_EVENT:"500001"};return a}(),SN.LocalStorageManager=function(){function b(b,c){if(SN.Utils.undefinedOrNull(a))return null;if(SN.Utils.undefinedOrNull(b)||SN.Utils.undefinedOrNull(c))return null;var d=a.getItem(b);if(d==null)return null;var e=d.split(SN.Constants.KEY_SEPERATOR),f=c+SN.Constants.KEY_VALUE_SEPERATOR;for(var g=0;g<e.length;g++){var h=e[g];if(h.indexOf(f)===0){var i=h.substring(f.length,h.length);return i}}return null}function c(b,c,d){var e="",f="",g=!1,h=!0,i=a.getItem(b);i==null&&(i="");var j=i.split(SN.Constants.KEY_SEPERATOR),k=c+SN.Constants.KEY_VALUE_SEPERATOR;for(var l=0;l<j.length;l++){var m=j[l];if(m=="")continue;m.indexOf(k)===0?g=!0:g?f=f+SN.Constants.KEY_SEPERATOR+m:h?(e=m,h=!1):e=e+SN.Constants.KEY_SEPERATOR+m}var n="";if(typeof d=="string"){var o=d.split(SN.Constants.KEY_SEPERATOR).join("").split(SN.Constants.KEY_VALUE_SEPERATOR).join("");o!=d&&SN.Logger.consoleLog("Data Key-Value Separator found inside the value. Removed.",{oldValue:d}),d=o}d==null?n=e+f:e==""?n=k+d+f:n=e+SN.Constants.KEY_SEPERATOR+k+d+f,a.setItem(b,n)}function d(b,c){return SN.Utils.undefinedOrNull(c)?a.removeItem(b):a.removeItem(this.key(c,b))}var a=window.localStorage,e={get:b,set:c,remove:d};return e}(),SN.CookieManager=function(){function b(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)===0)return e.substring(b.length,e.length)}return null}function c(a,c){var d=unescape(b(a));if(c==null)return d;if(d==null)return null;var e=d.split(SN.Constants.KEY_SEPERATOR),f=c+SN.Constants.KEY_VALUE_SEPERATOR;for(var g=0;g<e.length;g++){var h=e[g];if(h.indexOf(f)===0){var i=h.substring(f.length,h.length);return i}}return null}function d(a,c,d,f){var g="",h="",i=!1,j=!0,k=b(a);k==null&&(k="");var l=k.split(SN.Constants.KEY_SEPERATOR),m=c+SN.Constants.KEY_VALUE_SEPERATOR;for(var n=0;n<l.length;n++){var o=l[n];if(o=="")continue;o.indexOf(m)===0?i=!0:i?h=h+SN.Constants.KEY_SEPERATOR+o:j?(g=o,j=!1):g=g+SN.Constants.KEY_SEPERATOR+o}var p="";if(typeof d=="string"){var q=d.split(SN.Constants.KEY_SEPERATOR).join("").split(SN.Constants.KEY_VALUE_SEPERATOR).join("");d=q}d==null?p=g+h:g==""?p=m+d+h:p=g+SN.Constants.KEY_SEPERATOR+m+d+h;var r={};r.time=f*1e3,e(a,p,r)}function e(a,b,c,d){SN.Utils.undefinedOrNull(c)&&(c={});var e=[];b=f(b),e.push(SN.Utils.augmentKeyValuePair(a,b));if(!SN.Utils.undefinedOrNull(c.time)){var g=new Date;g.setTime(g.getTime()+c.time),e.push(SN.Utils.augmentKeyValuePair("expires",d?"Thu, 01 Jan 1970 00:00:01 GMT":g.toGMTString()))}SN.Utils.undefinedOrNull(c.path)&&(c.path="/"),e.push(SN.Utils.augmentKeyValuePair("path",c.path));if(SN.Utils.undefinedOrNull(c.domain)){var h=SN.Conf.COOKIEPATH;if(h!=null&&h.length>0)for(var i=0;i<h.length;i++){var j="."+h[i];if(document.domain==h[i]||SN.Utils.isSubDomain(document.domain,j))c.domain=j}if(SN.Utils.undefinedOrNull(c.domain)&&h!=null&&h.length>0)for(var i=0;i<h.length;i++){var j="."+h[i];document.location.href.replace(/https?:\/\//,"").indexOf(h[i])===0&&(c.domain=j)}SN.Utils.undefinedOrNull(c.domain)&&(c.domain="."+document.domain)}e.push(SN.Utils.augmentKeyValuePair("domain",c.domain)),document.cookie=e.join("; ")}function f(b){if(typeof b!="string")return b;var c=b,d=a.length;for(var e=0;e<d;++e)c=c.split(a[e]).join("");return c!=b&&SN.Logger.consoleLog("InvalidCharatersInCookie: was "+encodeURIComponent(b)+", changed to "+encodeURIComponent(c)+"."),c}var a=SN.Conf.INVALID_COOKIE_CHARACTERS,g={readSNCookie:c,readCookie:b,createSNCookie:d};return g}(),SN.Logger=function(){function c(a){var b=[].slice.call(a,0);for(var c=0;c<b.length;c++){var d=b[c];Object.prototype.toString.call(d)=="[object Array]"?b[c]=d.join(","):Object.prototype.toString.call(d)!="[object String]"&&(b[c]=JSON.stringify(d))}return b.join(" ")}function d(){if(!b)return;typeof console!=a.UNDEFINED_STR&&console.log(c(arguments))}var a=SN.Constants,b=SN.Conf.shouldLogInConsole,e={consoleLog:d};return e}(),SN.UserAgentParser=function(){function o(b){if(b!=null){var c=a.split(b),d=/(\d+\.)+\d+/,e=d.exec(c[1]);return e[0]}}function r(b){var c=a.indexOf(b)!=-1;if(c==1){var d=p[b].subStringNotToBePresent;for(var e=0;e<d.length;e++)if(a.indexOf(d[e])!=-1){c=!1;break}}else if(b=="MSIE"){var f="Trident/";if(a.indexOf(f)!=-1&&a.indexOf("rv:")!=-1){c=!0;var d=p[b].subStringNotToBePresent;for(var e=0;e<d.length;e++)if(a.indexOf(d[e])!=-1){c=!1;break}}}return c}function s(){return j+g+i+g+h}function t(){return i}function u(){for(var a in p)if(p.hasOwnProperty(a)&&r(a)==1){e=a.toLowerCase().charAt(0),e=="v"?e="s":e=="m"&&(e="i"),f=p[a].getVersion(),c=e+g+f;break}d.brDetails=c}function v(){return window.navigator.language?window.navigator.language:window.navigator.userLanguage}function w(){return c}function x(){return e}function y(){return f}function z(){return j}function A(){return k}function B(){var c=!1;for(var e in n)if(n.hasOwnProperty(e)&&a.indexOf(e)!=-1){var f=n[e].osVersion;j=n[e].osType;for(var g in f)if(f.hasOwnProperty(g)&&a.indexOf(g)!=-1){k=f[g];break}j=="iOS"&&(h=e),c=C(SN.Conf.blackListedVersions_OS.OSLevel,j)||C(n[e].blacklisted,k);break}if(j==b){var i="Android",l=-1;(l=a.indexOf(i))!=-1?(j=i,k=a.substring(l+8,l+11),c=C(n[i].blacklisted,k)):a.indexOf("X11")!=-1?j="UNIX":j="-bv"}k!=b?(j=j+"-"+k,c==1&&(j+="-bv")):j=j+"-"+k+"-bv",d.osDetails=j}function C(a,c){var d=!1;if(c.toLocaleLowerCase()==b.toLocaleLowerCase())d=!0;else if(a.length>0){for(var e=0;e<a.length;e++)if(c==a[e]){d=!0;break}if(d==0&&a.join().indexOf(".x")!=-1)for(var e=0;e<a.length;e++){var f=a[e].indexOf(".x");if(c.indexOf(a[e].substring(0,f))!=-1){d=!0;break}}}return d}function D(){try{if(h=="iPhone"||h=="iPod")i="M";h=="iPad"&&(i="T");if(i=="U"){var b=a.toLowerCase(),c=0;for(var e in q)if(q.hasOwnProperty(e)){if(c==1)break;var f=q[e];for(var g in f)if(f.hasOwnProperty(g)){c=1;var j=f[g];for(var k=0;k<j.length;k++){var l=j[k].toLocaleLowerCase();if(l.charAt(0)=="!"){if(b.indexOf(l.substring(1))!=-1){c=0;break}}else if(b.indexOf(l)==-1){c=0;break}}if(c==1){i=e.charAt(0),h=f[g][0];break}}}}C(SN.Conf.blacklistedDeviceTypes,i)&&(i+="-bv")}catch(n){m.consoleLog("Error while initializing device details:",n)}d.device=i}function E(){return l}function F(){var a="test";if(!window.localStorage||!window.sessionStorage)l=!0;try{sessionStorage.setItem(a,"1"),sessionStorage.removeItem(a),localStorage.setItem(a,"1"),localStorage.removeItem(a),l=!1}catch(b){SN.Conf.setStoresToCookie(),l=!0}}var a=navigator.userAgent,b="unknown",c=b,d={};d.userAgent=a;var e=b,f=b,g="~",h="others",i="U",j=b,k=b,l=!1,m=SN.Logger,n={Win:{osType:"Windows",osVersion:{"NT 5.1":"XP","NT 6.0":"Vista","NT 6.1":"7","NT 6.2":"8","NT 6.3":"8.1","NT 6.4":"10.0","NT 10.0":"10.0","Phone OS 7":"Phone_OS_7","Phone OS 8":"Phone_OS_8","Windows Phone 8.1":"Phone_OS_8.1","Windows Phone 8":"Phone_OS_8","Windows Phone 10.0":"Phone_OS_10.0"},blacklisted:["Phone_OS_7","Phone_OS_8.1","Phone_OS_8","Phone_OS_10.0"].concat(SN.Conf.blackListedVersions_OS.Windows)},iPod:{osType:"iOS",osVersion:{"CPU iPhone OS 4":"4","CPU iPhone OS 5":"5","CPU iPhone OS 6":"6","CPU iPhone OS 7":"7","CPU iPhone OS 8":"8","CPU iPhone OS 9":"9","CPU iPhone OS 10":"10","CPU OS 4":"4","CPU OS 5":"5","CPU OS 6":"6","CPU OS 7":"7","CPU OS 8":"8","CPU OS 9":"9","CPU OS 10":"10"},blacklisted:[].concat(SN.Conf.blackListedVersions_OS.iOS)},iPad:{osType:"iOS",osVersion:{"CPU iPhone OS 4":"4","CPU iPhone OS 5":"5","CPU iPhone OS 6":"6","CPU iPhone OS 7":"7","CPU iPhone OS 8":"8","CPU iPhone OS 9":"9","CPU iPhone OS 10":"10","CPU OS 4":"4","CPU OS 5":"5","CPU OS 6":"6","CPU OS 7":"7","CPU OS 8":"8","CPU OS 9":"9","CPU OS 10":"10"},blacklisted:[].concat(SN.Conf.blackListedVersions_OS.iOS)},iPhone:{osType:"iOS",osVersion:{"CPU iPhone OS 4":"4","CPU iPhone OS 5":"5","CPU iPhone OS 6":"6","CPU iPhone OS 7":"7","CPU iPhone OS 8":"8","CPU iPhone OS 9":"9","CPU iPhone OS 10":"10","CPU OS 4":"4","CPU OS 5":"5","CPU OS 6":"6","CPU OS 7":"7","CPU OS 8":"8","CPU OS 9":"9","CPU OS 10":"10"},blacklisted:[].concat(SN.Conf.blackListedVersions_OS.iOS)},Mac:{osType:"MacOS",osVersion:{"Mac OS X 10_4":"Tiger","Mac OS X 10.4":"Tiger","Mac OS X 10_5":"Leopard","Mac OS X 10.5":"Leopard","Mac OS X 10_6":"Snow Leopard","Mac OS X 10.6":"Snow Leopard","Mac OS X 10_7":"Lion","Mac OS X 10.7":"Lion","Mac OS X 10_8":"Mountain Lion","Mac OS X 10.8":"Mountain Lion","Mac OS X 10_9":"Mavericks","Mac OS X 10.9":"Mavericks","Mac OS X 10_10":"Yosemite","Mac OS X 10.10":"Yosemite","Mac OS X 10_11":"El_Capitan","Mac OS X 10.11":"El_Capitan","Mac OS X 10_12":"Sierra","Mac OS X 10.12":"Sierra"},blacklisted:[].concat(SN.Conf.blackListedVersions_OS.MacOS)},Android:{osType:"Android",osVersion:{"Android 4.0.3":"4.0.3","Android 4.1":"4.1","Android 4.1.1":"4.1.1","Android 4.1.2":"4.1.2","Android 4.2":"4.2","Android 4.2.1":"4.2.1","Android 4.2.2":"4.2.2","Android 4.3":"4.3","Android 4.3.1":"4.3.1","Android 4.4":"4.4","Android 5.0":"5.0","Android 5.1":"5.1","Android 5.1.1":"5.1.1","Android 6.0":"6.0","Android 6.0.1":"6.0.1","Android 7.0":"7.0","Android 7.1":"7.1","Android 7.1.1":"7.1.1"},blacklisted:[].concat(SN.Conf.blackListedVersions_OS.Android)},Linux:{osType:"Linux",osVersion:{Ubuntu:"Ubuntu",CentOS:"CentOS","Red Hat":"Red Hat",Mandriva:"Mandriva",Gentoo:"Gentoo",Debian:"Debian",Fedora:"Fedora",X11:"X11"},blacklisted:[].concat(SN.Conf.blackListedVersions_OS.Linux)}},p={Firefox:{lowestSupportedVersion:"3.6",subStringNotToBePresent:["Classilla","Kapika","CometBird","Orca","Madfox","PaleMoon","midori","Navigator","Pogo","SeaMonkey","TenFourFox","Wyzo","Fennec"],blacklistedVersions:[].concat(SN.Conf.blackListedVersions_browsers.Firefox),getVersion:function(){return o("Firefox/")}},Edge:{lowestSupportedVersion:"12",subStringNotToBePresent:[],blacklistedVersions:[].concat(SN.Conf.blackListedVersions_browsers.Edge),getVersion:function(){return o("Edge/")}},Android:{lowestSupportedVersion:"4",subStringNotToBePresent:["Chrome","Fennec","Dorothy","GoBrowser","Presto","Opera"],blacklistedVersions:[].concat(SN.Conf.blackListedVersions_browsers.Android),getVersion:function(){return o("Version/")}},Version:{lowestSupportedVersion:"5",subStringNotToBePresent:["Android","Mobile Safari","Opera","BOLT","Dorothy","BlackBerry","Iris","SkyFire"],blacklistedVersions:[].concat(SN.Conf.blackListedVersions_browsers.Version),getVersion:function(){return o("Version/")}},Chrome:{lowestSupportedVersion:"10",subStringNotToBePresent:["ChromePlus","Flock","Comodo_Dragon","Iron","RockMelt","OPR"],blacklistedVersions:[].concat(SN.Conf.blackListedVersions_browsers.Chrome),getVersion:function(){return o("Chrome/")}},CriOS:{lowestSupportedVersion:"10",subStringNotToBePresent:[],blacklistedVersions:[].concat(SN.Conf.blackListedVersions_browsers.CriOS),getVersion:function(){return o("CriOS/")}},MSIE:{lowestSupportedVersion:"8",blacklistedVersions:[].concat(SN.Conf.blackListedVersions_browsers.MSIE),subStringNotToBePresent:["AOL","Avant","Crazy Browser","Deepnet Explorer","Surf","GreenBrowser","iRider","TencentTraveler","The World","KKMAN","MyIE2","Sleipnir","SlimBrowser"],getVersion:function(){var b=null,c=null,d=null;return a.indexOf("MSIE")!=-1?(b=/MSIE (\d+\.)+\d+/,c=b.exec(a),d=c[0].split(" ")):(b=/rv:(\d+\.)+\d+/,c=b.exec(a),d=c[0].split(":")),d[1]}}},q={Tablet:{1:["android","!mobile"],2:["ipad","webkit"],3:["playbook"],4:["kindle"],5:["xoom"],6:["tablet","!Windows NT"]},Mobile:{1:["iphone","!ipad","!ipod"],2:["blackberry"],3:["android","mobile"],4:["iemobile"],5:["windows phone"],6:["nokia"],7:["fennec"],8:["mib"],9:["minimo"],10:["symbian"],11:["netfront"],12:["up.browser"],13:["openweb"],14:["opera mini"],15:["opera mobi"],16:["brew"],17:["danger"],18:["hiptop"],19:["midp"],20:["webos"],21:["ipod"]},Desktop:{1:["windows"],2:["linux"],3:["oss+[x9]"],4:["solaris"],5:["bsd"],6:["mac os x"]},Unknown:{1:["others"]}},G={browserList:p,isBrowser:r,isSafariPrivateBrowsingMode:E,checkIfBlackListedVersion:C,getBrowserDetails:w,getBrowserLanguage:v,getDeviceDetails:s,getDeviceType:t,getBrowserType:x,getBrowserVersion:y,getOSType:z,getOSVersion:A,environmentDetails:d};return B(),D(),u(),F(),G}(),typeof SN=="undefined"&&(SN={}),SN.loadTrackingScript=function(a,b,c,d,e,f){var g=SN.Constants;try{var h=new String((new Date).getTime()),i=document.createElement("script");i.type="text/javascript";var j="id="+window.pspSNTrackingId+"&type="+a+"&ts="+h;typeof b!==g.UNDEFINED_STR&&b!=null&&(j=j+"&vid="+b);var k=window.location.pathname;k.length>200&&(k=k.substr(0,200)),j=j+"&u="+encodeURIComponent(k),j=j+"&ll="+f,typeof c!==g.UNDEFINED_STR&&c!=null&&c!=""&&(j=j+"&ed="+c),j.length>2e3&&(j=j.substr(0,2e3)),i.id="track-js"+h,i.src=document.location.protocol+"//"+SN.Conf.CUSTOM_TRACK_SERVER+"/psp/"+e+"/"+SN.Conf.CONST_PSP_VERSION+"/cpxt.js?"+j;var l=document.getElementsByTagName("head").item(0);void l.appendChild(i)}catch(m){SN.Logger.consoleLog("Error while sending custom tracking data "+m)}};var JSON_247=function(){function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}function stringify(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON_247.stringify")}function parse(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON_247.parse")}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep,me={parse:parse,stringify:stringify};return me}();SN.CookieSanitizer=function(){function c(c){if(typeof c!="string")return c;var d=c;for(var e=0;e<b;++e)d=d.split(a[e]).join("");return d!=c&&SN.loadTrackingScript("InvalidCharacterInCookie","","",SN.Conf.CUSTOM_TRACK_SERVER,SN.Conf.CONST_PSP_KEY,SN.Constants.LOGLEVEL_ERROR),d}var a=SN.Conf.INVALID_COOKIE_CHARACTERS,b=a.length,d={sanitize:c};return d}(),SN.Tracker=function(){function poll(){sendAll()}function saveOnExit(){try{var a=JSON_247.stringify(eventStorage);SN.UserAgentParser.isSafariPrivateBrowsingMode()?SN.CookieManager.createSNCookie("sn.tdata","td",a):sessionStorage.setItem("sn.tdata",a)}catch(b){SN.Logger.consoleLog("SN.Tracker:Error storing event data "+b)}}function init(){isIE()?(MAX_URL_SIZE=2e3,SN.Logger.consoleLog("SN.Tracker: browser type IE , setting url size to lower")):MAX_URL_SIZE=3300,setInterval(poll,CONST_POLLING_TIME_INTERVAL);if(typeof sessionStorage==SN_CONSTANTS.UNDEFINED_STR||SN.Utils.undefinedOrNull(sessionStorage))return;try{window.addEventListener?window.addEventListener("unload",saveOnExit,!1):document.addEventListener?document.addEventListener("unload",saveOnExit,!1):window.attachEvent&&window.attachEvent("onunload",saveOnExit);var a=getOldEventData();copyParams(a,eventStorage),sendAll()}catch(b){SN.Logger.consoleLog("SN.Tracker:Error in accessing old session data "+b)}}function getOldEventData(){if(SN.UserAgentParser.isSafariPrivateBrowsingMode()){var oldData=SN.CookieManager.readSNCookie("sn.tdata","td");return SN.CookieManager.createSNCookie("sn.tdata","td","{}"),eval("("+oldData+")")}return eval("("+sessionStorage.getItem("sn.tdata")+")")}function sendAll(){for(var a in eventStorage)if(eventStorage.hasOwnProperty(a)){var b=eventStorage[a],c;b[CONST_RETRY_COUNT]<MAX_RETRY_COUNT?(new Date).getTime()-b[CONST_REQUEST_TIME]>CONST_TIME_OUT&&(b[CONST_REQUEST_TIME]=(new Date).getTime(),b[CONST_RETRY_COUNT]=b[CONST_RETRY_COUNT]+1,SN.Logger.consoleLog("SN.Tracker:Retrying It, retry count ="+b[CONST_RETRY_COUNT]+", request id ="+a),c=b[CONST_TRACKING_SECURED],makeTrackingCall(getDefaultUrl(c),b[CONST_REQUEST_PARAM])):(SN.Logger.consoleLog("SN.Tracker:Removing event data , retry count ="+b[CONST_RETRY_COUNT]+", request id :"+a),delete eventStorage[a],updateStatus(a,"FAILED"))}}function makeTrackingCall(a,b){sseq++;var c="pt"+sseq,d=document.getElementsByTagName("head").item(0),e=document.createElement("script");e.type="text/javascript",e.id=c,e.src=appendUrlParams(a,c,b),e.async=!0;var f=SN.Conf.japCharMap;for(var g in f)f.hasOwnProperty(g)&&(e.src=replaceAllInString(e.src,g,f[g]));void d.appendChild(e)}function replaceAllInString(a,b,c,d){return a.replace(new RegExp(b.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),d?"gi":"g"),typeof c=="string"?c.replace(/\$/g,"$$$$"):c)}function processResponse(a){SN.Logger.consoleLog("SN.Tracker: Processing response"),SN.Utils.undefinedOrNull(a.code)||(SN.Logger.consoleLog("SN.Tracker: Got error response for r="+a.r+" with error code= "+a.code),SN.Utils.undefinedOrNull(eventStorage[a.r])||(delete eventStorage[a.r],updateStatus(a.r,"FAILED"))),SN.Utils.undefinedOrNull(eventStorage[a.r])?SN.Logger.consoleLog("SN.Tracker: Got success response for req ="+a.r+" , but the response is already processed , so ignoring it"):(SN.Logger.consoleLog("SN.Tracker: Got success response for req ="+a.r+" ,  removing it"),delete eventStorage[a.r],updateStatus(a.r))}function removeElement(a){var b=document.getElementById(a);if(b){var c=document.getElementsByTagName("head").item(0);setTimeout(function(){try{c.removeChild(b)}catch(a){SN.Logger.consoleLog("Could not remove pxt.js in 247px.js. "+a)}},2e3)}}function getSessionData(){if(!iframeContentWindow){var a=document.getElementById("sn_iframe");SN.Utils.undefinedOrNull(a)?storeManager=SN.StoreManager:(iframeContentWindow=a.contentWindow,storeManager=iframeContentWindow.SN.StoreManager)}if(SN.Utils.undefinedOrNull(storeManager)||SN.Utils.undefinedOrNull(storeManager.getValueFromStore))return null;var b,c,d={},e="-";SN.Utils.undefinedOrNull(vi)&&(vi=storeManager.getValueFromStore("sn.vi","vi")),d.vi=vi;if(SN.Utils.undefinedOrNull(vg)||SN.Utils.undefinedOrNull(tp)||SN.Utils.undefinedOrNull(ti)||SN.Utils.undefinedOrNull(re)||SN.Utils.undefinedOrNull(rt)||SN.Utils.undefinedOrNull(rv))vg=storeManager.getValueFromStore("sn.as","vg"),ti=storeManager.getValueFromStore("sn.as","ti"),tp=storeManager.getValueFromStore("sn.as","tp"),rt=storeManager.getValueFromStore("sn.rn","rt"),rv=storeManager.getValueFromStore("sn.rn","rv"),re=storeManager.getValueFromStore("sn.rn","re");d.vg=vg,d.ti=ti,d.tp=tp,d.rt=rt,d.rv=rv,d.re=re,c=storeManager.getValueFromStore("sn.as","a"),b=storeManager.getValueFromStore("sn.vi","as"),SN.Utils.undefinedOrNull(b)||(c!="t"?d.as=(parseInt(b)+1).toString():d.as=b.toString()),d.v=SN.Conf.CONST_PSP_VERSION,SN.Utils.undefinedOrNull(d.vi)?bsid=null:bsid=d.vi+e+d.as,d.bsid=bsid,d.up=getUniquePageId();var f=storeManager.getValueFromStore("sn.vi","it");return f==null&&(f=0),d.it=parseInt(f),tseq++,d.tseq=tseq,d}function createMetaData(){var a={};return a.key=SN.Conf.CONST_PSP_KEY,a}function constructAndMakeTrackingCall(a,b,c,d){SN.Utils.undefinedOrNull(c)||(statusTracker=c),SN.Utils.undefinedOrNull(a)&&(a=createMetaData());var e=getDefaultUrl(d),f=getSessionData();b.vp=SN.Conf.FRAMEWORK_VERSION,b.vt=SN.Conf.TRACKING_VERSION,b.vc=SN.Conf.CONST_CDN_VERSION,copyParams(f,b),SN.Utils.undefinedOrNull(b.tp)&&(b.tp="NA"),SN.Utils.undefinedOrNull(b.f)&&(b.f={}),SN.Utils.undefinedOrNull(b.f.v)&&(b.f.v={}),SN.Utils.undefinedOrNull(b.f.c)&&(b.f.c={});var g=!1;if(iframeContentWindow)try{g=iframeContentWindow.SN.ConfigurationManager.getTargetPopulationId()===SN.Conf.controlGroupTP}catch(h){g=!1}else b&&(g=b.tp===SN.Conf.controlGroupTP);b.f.c.overallCG=g,b.f.v.br=uAParser.getBrowserDetails(),b.f.v.dd=uAParser.getDeviceDetails();var i=new Date;b.f.v.tz=i.getTimezoneOffset();var j=getUniqueId();b.ec==SN_CONSTANTS.ENV_NOT_SUPPORTED_EVENT&&(b.vi=j);var k=createTrackingData(b);if(k.length==0)return;var l=k.length;status[j]=l;var m=1;if(SN.Utils.undefinedOrNull(b.vi)){var n=document.getElementById(SN.Constants.CONST_SN_IFRAME_TAG);SN.Utils.undefinedOrNull(n)?b.vi=j:b.vi=n.contentWindow.SN.StoreManager.getValueFromStore("sn.vi","vi")}while(k.length>0){var o={};o[CONST_REQUEST_ID]=j+"-"+l+"-"+m,m++;try{copyParams(a,o),o[CONST_TRACKING_DATA]=k.shift(),save(o,d),SN.Logger.consoleLog("SN.Tracker: Got an event, assigning request id = "+o[CONST_REQUEST_ID]),makeTrackingCall(e,o)}catch(p){SN.Logger.consoleLog("SN.Tracker:Exception while sending event data. request id:"+o[CONST_REQUEST_ID]+" "+p)}}if(b.ec==SN_CONSTANTS.PAGE_EVENT_VISIT_TO_TAGGED_PAGE)try{iframeContentWindow=document.getElementById(SN.Constants.CONST_SN_IFRAME_TAG).contentWindow,iframeContentWindow.SN.EventManager.fire(SN_CONSTANTS.PAGE_LOAD_EVENT_COMPLETE,null)}catch(h){SN.Logger.consoleLog("SN.EventManager: Not loaded Iframe Yet")}return SN.Conf.eventBasedEvalTriggerEnabled&&fireEvalToBeTriggeredEvent(b.ec),j}function fireEvalToBeTriggeredEvent(a){if(SN.Utils.isEvalEnabled()){var b=!1;if(isIE8()){for(var c=0;c<SN.Conf.triggerEvalForEvents_TIE.length;c++)if(SN.Conf.triggerEvalForEvents_TIE[c]==a){b=!0;break}}else SN.Conf.triggerEvalForEvents_TIE.indexOf(a)!=-1&&(b=!0);if(b){evalTriggerTimeout!=null&&(window.clearTimeout(evalTriggerTimeout),evalTriggerTimeout=null,SN.Logger.consoleLog("Another valid event for eval within 5 seconds of the previous. Hence clearing the scheduled eval for previous. TimeStamp : "+new Date));var d={eventCode:a};SN.Logger.consoleLog("Trigger eval after 5 seconds. Event code : "+a+". Time stamp: "+new Date),evalTriggerTimeout=window.setTimeout(function(){try{iframeContentWindow=document.getElementById(SN.Constants.CONST_SN_IFRAME_TAG).contentWindow,iframeContentWindow.SN.EventManager.fire(SN_CONSTANTS.TRIGGER_EVAL_CALL,d)}catch(a){SN.Logger.consoleLog("SN.EventManager: iFrame Not Available")}},SN.Conf.delayEvalTriggerByMilliSeconds)}}}function save(a,b){var c={};c[CONST_REQUEST_PARAM]=a,c[CONST_REQUEST_TIME]=(new Date).getTime(),c[CONST_RETRY_COUNT]=1,c[CONST_TRACKING_SECURED]=b,eventStorage[a[CONST_REQUEST_ID]]=c,SN.Logger.consoleLog("SN.Tracker: Successfully saved the request, req id = "+a[CONST_REQUEST_ID])}function getDefaultUrl(a){return SN.Utils.undefinedOrNull(a)&&(a=SN.Conf.trackingSecured),a?"https://"+SN.Conf.CONST_PSP_ROOT+"/psp/"+SN.Conf.CONST_PSP_KEY+"/"+SN.Conf.CONST_PSP_VERSION+"/pxt.js?":document.location.protocol+"//"+SN.Conf.CONST_PSP_ROOT+"/psp/"+SN.Conf.CONST_PSP_KEY+"/"+SN.Conf.CONST_PSP_VERSION+"/pxt.js?"}function createTrackingData(a){var b={};b.e=a;var c=[];if(headerReferrerSize==null){headerReferrerSize=encodeURIComponent(window.location.href).length,allowedChunkLength=MAX_URL_SIZE-headerReferrerSize;if(allowedChunkLength<=0)return SN.loadTrackingScript("PXT call blocked because of Large referrer size:"+headerReferrerSize,"","",SN.Conf.CUSTOM_TRACK_SERVER,SN.Conf.CONST_PSP_KEY),c}if(allowedChunkLength<=0)return c;var d=JSON_247.stringify(b),e=encodeURIComponent(d).length,f=Math.ceil(e/allowedChunkLength);if(f>20)return c;var g=d.length,h=Math.floor(g/f);for(var i=0;i<d.length;i+=h){var j=i+h;d.length<=i+h&&(j=d.length),c.push(d.substring(i,j))}return c}function isIE(){return uAParser.getBrowserType()=="i"}function isIE8(){return isIE()&&uAParser.getBrowserVersion().indexOf("8")==0}function isSafari(){return uAParser.getBrowserType()=="s"}function evaluate(inputExp){var result={};for(var property in inputExp)if(inputExp.hasOwnProperty(property))try{var value=eval(inputExp[property]);value!=null&&value!=SN_CONSTANTS.UNDEFINED_STR&&value!="null"&&(result[property]=eval(inputExp[property]))}catch(err){SN.Logger.consoleLog("PS: error in getting value for: "+property+" "+err)}return result}function getUniqueId(){return Math.random().toString().substring(2,18)+"-"+(new Date).getTime()}function getUniquePageId(){return uniquePageId}function setUniquePageId(a){uniquePageId=a}function appendUrlParams(a,b,c){var d=a.length>0&&a.charAt(a.length-1)!="?";d==1?a+="&":d=!0,a+="sId="+b;for(var e in c)c.hasOwnProperty(e)&&(d==1?a+="&":d=!0,typeof c[e]=="object"?a+=e+"="+encodeURIComponent(JSON_247.stringify(c[e])):a+=e+"="+encodeURIComponent(c[e]));return a}function copyParams(a,b){if(SN.Utils.undefinedOrNull(a))return;for(var c in a)a.hasOwnProperty(c)&&(SN.Utils.undefinedOrNull(a[c])||(b[c]=a[c]))}function retrieveEventRequestId(a){var b=a.split("-");return b[0]+"-"+b[1]}function updateStatus(a,b){try{var c=retrieveEventRequestId(a);if(SN.Utils.undefinedOrNull(status[c]))return;if(!SN.Utils.undefinedOrNull(b)){SN.Utils.undefinedOrNull(statusTracker)||statusTracker.call(this,c,b),delete status[c];return}status[c]=status[c]-1,status[c]==0&&(SN.Utils.undefinedOrNull(statusTracker)||statusTracker.call(this,c,"SUCCESS"),delete status[c])}catch(d){SN.Logger.consoleLog("SN.Tracker: Error while updating the status for request id ="+a+" "+d)}}function setWowpxSessionData(a,b,c,d,e,f){!SN.Utils.undefinedOrNull(a)&&!SN.Utils.undefinedOrNull(b)&&!SN.Utils.undefinedOrNull(c)&&(vg=a,tp=b,ti=c),SN.Utils.undefinedOrNull(d)||(d="wowpx_"+d),!SN.Utils.undefinedOrNull(e)&&!SN.Utils.undefinedOrNull(f)&&(rt=e,rv=f)}var SN_CONSTANTS=SN.Constants,uAParser=SN.UserAgentParser,CONST_REQUEST_ID="r",CONST_TRACKING_DATA="d",CONST_RETRY_COUNT="retryCount",CONST_REQUEST_TIME="requestTime",CONST_REQUEST_PARAM="requestParam",CONST_TRACKING_SECURED="trackingSecured",eventStorage={},CONST_POLLING_TIME_INTERVAL=3e3,MAX_RETRY_COUNT=3,CONST_TIME_OUT=2e3,tseq=-1,sseq=-1,uniquePageId=(new Date).getTime(),vi,bsid,MAX_URL_SIZE,statusTracker,status={},vg,tp,ti,rt,rv,re,headerReferrerSize=null,allowedChunkLength=-1,iframeContentWindow=null,storeManager=null,evalTriggerTimeout=null;return init(),{constructAndMakeTrackingCall:constructAndMakeTrackingCall,processResponse:processResponse,removeElement:removeElement,getUniquePageId:getUniquePageId,setUniquePageId:setUniquePageId,setWowpxSessionData:setWowpxSessionData}}(),SN.Custom=SN.Custom||{},SN.Custom.XdDataHandler=function(a){var b="wowpxstatechangeevent",c="wowpxtrackingevent",d="trackingEvent",e="customEvent",f={};if(a.data==null||typeof a.data=="undefined")a.data={};a.data.force=!0;var g="sn_iframe",h=document.getElementById(g);if(h){var i=h.contentWindow||h.contentDocument;i&&i.SN&&i.SN.EventManager&&(a.eventType==d?i.SN.EventManager.fire(c,{sr:a.source,eventId:a.eventId,x:a.ex,agentId:a.agentId,formId:a.formId,fireImmediately:!0,data:a.data}):a.eventType==e&&i.SN.EventManager.fire(b,{sr:a.source,eventId:a.eventId,x:a.ex,agentId:a.agentId,formId:a.formId,fireImmediately:!0,data:a.data}))}},XD=function(){function b(b,c){var d=a[b]||null;return a[b]=c,d}function c(b,c){var d=a[b];d&&d(c)}function d(){typeof console!="undefined"&&console.error(arguments)}var a={};return{registerListener:b,process:c}}(),XD.registerListener("https://d1af033869koo7.cloudfront.net",SN.Custom.XdDataHandler),XD.registerListener("http://d1af033869koo7.cloudfront.net",SN.Custom.XdDataHandler),typeof SN=="undefined"&&(SN={});try{var randStr=(new String((new Date).getTime())).valueOf()+"-"+Math.floor(Math.random()*1e6);window.pspSNTrackingId=randStr}catch(err){SN.Logger.consoleLog("Error: Unable to generate unique id for custom events "+err)}SN.Tag=function(){function l(i,j){SN.CallBackToCustom&&SN.CallBackToCustom.onSNIframeToBeCreated();if(document.getElementById(b)!=null){SN.loadTrackingScript("Not loading again as sn_iframe already present in page(url : "+location.href,null,"",SN.Conf.CUSTOM_TRACK_SERVER,SN.Conf.CONST_PSP_KEY,SN.Constants.LOGLEVEL_INFO);return}var k=document.createElement(a);k.style.width=c,k.style.height=d,k.style.border=e,k.style.position=f,k.style.top=h,k.style.left=g,k.async=!0,k.id=b;var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(k,l);var m="//"+SN.Conf.CDN_DOMAIN+"platform/"+SN.Conf.CONST_PSP_VERSION+"/"+SN.Conf.CONST_247FWK_ID;SN.Conf.loadLastRelease&&(SN.Conf.CONST_PSP_VERSION=="test"?m="//"+SN.Conf.CDN_DOMAIN+"platform/lr-test/"+SN.Conf.CONST_247FWK_ID:m="//"+SN.Conf.CDN_DOMAIN+"platform/lr/"+SN.Conf.CONST_247FWK_ID),window.documentDomain=document.domain;var n=document.domain,o=!1,p;try{p=k.contentWindow.document}catch(q){o=!0,k.src="javascript:var d=document.open();d.domain='"+n+"';void(0);",p=k.contentWindow.document}p.write("<!DOCTYPE html><html><head></head><script>if("+o+'){document.domain = "'+n+'";}var js = document.createElement("script");js.id="js-iframe-async";js.src = "'+m+'";document.getElementsByTagName("head")[0].appendChild(js); </script><body></body></html>'),p.close()}function m(){if(!SN.Utils.undefinedOrNull(i))return i=="true";if(!navigator.cookieEnabled){SN.loadTrackingScript("cookies disabled because of which localstorage doesn't work",null,"",SN.Conf.CUSTOM_TRACK_SERVER,SN.Conf.CONST_PSP_KEY,SN.Constants.LOGLEVEL_ERROR);return}return SN.UserAgentParser.isSafariPrivateBrowsingMode()?i=window[SN.Constants.IS_CUSTOM_TRACKING_ENABLED]:i=window.localStorage.getItem(SN.Constants.IS_CUSTOM_TRACKING_ENABLED),SN.Utils.undefinedOrNull(i)&&(Math.floor(Math.random()*100)<=SN.Conf.CUSTOM_TRACKING_PERCENTAGE?i="true":i="false",SN.UserAgentParser.isSafariPrivateBrowsingMode()?window[SN.Constants.IS_CUSTOM_TRACKING_ENABLED]=i:window.localStorage.setItem(SN.Constants.IS_CUSTOM_TRACKING_ENABLED,i)),i=="true"}function n(){window.localStorage&&navigator.geolocation&&SN.UserAgentParser.getBrowserDetails().indexOf("i~8")==-1&&navigator.geolocation.getCurrentPosition(function(b){SN.UserAgentParser.isSafariPrivateBrowsingMode()?(SN.CookieManager.createSNCookie("sn."+SN.Constants.BROWSER_GEO_LOCATION,"lat",b.coords.latitude,900),SN.CookieManager.createSNCookie("sn."+SN.Constants.BROWSER_GEO_LOCATION,"long",b.coords.longitude,900)):window.localStorage.setItem("sn."+SN.Constants.BROWSER_GEO_LOCATION,"lat||"+b.coords.latitude+"~long||"+b.coords.longitude)},function(b){var c="ue";switch(b.code){case b.PERMISSION_DENIED:c="pd";break;case b.POSITION_UNAVAILABLE:c="pu";break;case b.TIMEOUT:c="to";break;case b.UNKNOWN_ERROR:c="ue"}SN.UserAgentParser.isSafariPrivateBrowsingMode()?SN.CookieManager.createSNCookie("sn."+SN.Constants.BROWSER_GEO_LOCATION,"err",c,900):window.localStorage.setItem("sn."+SN.Constants.BROWSER_GEO_LOCATION,"err||ue")},{timeout:SN.Conf.timeOutForBrowserGeoLocation})}var a="iframe",b=SN.Constants.CONST_SN_IFRAME_TAG,c="0px",d="0px",e="0px",f="absolute",g="-50px",h="-50px",i=null,j=document.domain,k="";m(),SN.Conf.browserGeoLocationFlag&&n();var o={createSNIframeOnHead:l};return o}();if(!SN)var SN={};SN.DecisionEvaluator=function(){function i(){SN.Conf.DS_dataStore=="cookie"||SN.UserAgentParser.isSafariPrivateBrowsingMode()?SN.CookieManager.createSNCookie(SN.Constants.SN_DS_STORE_NAME,"d",b,SN.Conf.DECISION_LIFETIME):(SN.LocalStorageManager.set(SN.Constants.SN_DS_STORE_NAME,"d",b),SN.LocalStorageManager.set(SN.Constants.SN_DS_STORE_NAME,"ts",(new Date).getTime()))}function j(){if(SN.Conf.DS_dataStore=="cookie"||SN.UserAgentParser.isSafariPrivateBrowsingMode())return SN.CookieManager.readSNCookie(SN.Constants.SN_DS_STORE_NAME,"d");var a=SN.LocalStorageManager.get(SN.Constants.SN_DS_STORE_NAME,"ts"),b=(new Date).getTime();if(SN.Conf.DECISION_LIFETIME<(b-a)/1e3)return SN.LocalStorageManager.remove(SN.Constants.SN_DS_STORE_NAME),null;var c=SN.LocalStorageManager.get(SN.Constants.SN_DS_STORE_NAME,"d");return SN.LocalStorageManager.set(SN.Constants.SN_DS_STORE_NAME,"ts",(new Date).getTime()),c}function k(b){a=b}function l(){var h=new Date;h=new Date(h.getTime()+h.getTimezoneOffset()*60*1e3);var k=h.getHours()*100+h.getMinutes();if(k>a.start&&k<a.stop){var l=j();if(!SN.Utils.undefinedOrNull(l))b=l;else{var m=parseInt(Math.random().toString().substring(2,4));m<a.offpeakbypass?b=e:b=f}i()}return b==f&&(d=g,c=SN.Conf.CONST_CDN_VERSION),{decision:b,pspVersion:d,cdnVersion:c}}function m(){try{b=j();if(b==null){var a=Math.random().toString().substring(2,4);a<SN.Conf.BYPASS_PERCENTAGE?b=e:b=f,i()}if(b==f){a=Math.random().toString().substring(2,4),a=parseInt(a),a<SN.Conf.TEST_PERCENTAGE?(d="t",SN.Conf.CONST_PSP_VERSION="test"):(d="d",SN.Conf.CONST_PSP_VERSION="default");var g=function(){var a=new Date,b=new Date(a.getFullYear(),0,1),c=new Date(a.getFullYear(),6,1),d=Math.max(b.getTimezoneOffset(),c.getTimezoneOffset());return a.getTimezoneOffset()<d}();k({start:SN.Conf.PEAK_HOUR_START,stop:SN.Conf.PEAK_HOUR_STOP,tzoffset:g?300:360,offpeakbypass:SN.Conf.OFFPEAK_BYPASS});var m=l();b=m.decision,d=m.pspVersion,c=m.cdnVersion}return c=SN.Conf.CONST_CDN_VERSION,{decision:b,pspVersion:d,cdnVersion:c}}catch(n){h.consoleLog("Error while processing decision",n)}}var a=null,b=null,c=null,d=null,e="b",f="a",g="d",h=SN.Logger,n={init:k,getDecision:m,getDecisionFromStore:j,saveDecisionInStore:i,getDecision_TimeThrottling:l};return n}(),typeof SN=="undefined"&&(SN={}),SN.ResourceLoader=function(){function u(){typeof c=="undefined"||SN.Utils.undefinedOrNull(c)?(s.consoleLog("decision doesn't exist, getting decision !!"),SN.DecisionEvaluator.getDecision()):c==a?typeof f=="undefined"||SN.Utils.undefinedOrNull(f)||typeof g=="undefined"||SN.Utils.undefinedOrNull(g)?(SN.Logger.consoleLog("decision exists but not pspversion or cdnversion, getting decision !!"),SN.DecisionEvaluator.getDecision()):SN.Tag.createSNIframeOnHead(g,r[f]):s.consoleLog("Decision != active, not initializing framework")}function v(a){var b=a.split(".");for(var c=0;c<b.length;c++)b[c]=parseInt(b[c]);return b}function w(a,b){var c=v(a),d=v(b),e=c.length;c.length>d.length&&(e=d.length);for(var f=0;f<e;f++){if(c[f]>d[f])return!0;if(c[f]<d[f])return!1}if(f==e)return!0}function x(){try{var a;for(var b in t.browserList)if(t.browserList.hasOwnProperty(b)&&t.isBrowser(b)==1){if(t.checkIfBlackListedVersion(SN.Conf.blackListedVersions_browsers.browserLevel,b))return t.environmentDetails.ENS="br",!1;a=t.browserList[b].getVersion();if(w(a,t.browserList[b].lowestSupportedVersion)){var c=t.browserList[b].blacklistedVersions;for(var d=0;d<c.length;d++)if(a==c[d])return t.environmentDetails.ENS="brVer",!1;return!0}return t.environmentDetails.ENS="brVer",!1}return t.environmentDetails.ENS="br",!1}catch(e){return s.consoleLog("Error while evaluating isBrowserSupported:"+e),!1}}function y(){try{var a=t.getOSType();return a=="unknown"||SN.Utils.undefinedOrNull(a)?(t.environmentDetails.ENS="OS",!1):t.isBrowser("Firefox")&&a.indexOf("Android-not found")!=-1?(t.environmentDetails.ENS="OSVer",!1):a.indexOf("-bv")==a.length-3?(t.environmentDetails.ENS="OSVer",!1):!0}catch(b){return s.consoleLog("Error while evaluating isOSSupported:",b),!1}}function z(){try{var a=t.getDeviceType();return a.indexOf("-bv")==a.length-3?(t.environmentDetails.ENS="device",!1):!0}catch(b){return s.consoleLog("Error while evaluating isDeviceSupported:",b),!1}}function A(a,b){var c=a.length>0&&a.charAt(a.length-1)!="?";for(var d in b)b.hasOwnProperty(d)&&(c==1?a+="&":c=!0,typeof b[d]=="object"||B(b)?a+=d+"="+encodeURIComponent(JSON_247.stringify(b[d])):a+=d+"="+encodeURIComponent(b[d]));return a}function B(a){return a.constructor==Array}function C(){var a={ec:o,cp:encodeURIComponent(document.location.href)},b=SN.Conf.earlyPageLoadED;Object.keys(b).length>0&&(a.ed=b);var c=null;SN.Conf.viStore=="cookie"?c=SN.CookieManager.readSNCookie(SN.Constants.SN_VI_STORE_NAME,"vi"):c=SN.LocalStorageManager.get(SN.Constants.SN_VI_STORE_NAME,"vi");if(!SN.Utils.undefinedOrNull(c)){a.vi=c;var d={},e=null;if(SN.Conf.dataStore=="cookie")e=SN.CookieManager.readSNCookie;else if(SN.Conf.datatstore="localstorage")e=SN.LocalStorageManager.get;if(e!=null){d={re:e(SN.Constants.SN_RN_STORE_NAME,"re"),rt:e(SN.Constants.SN_RN_STORE_NAME,"rt"),rv:e(SN.Constants.SN_RN_STORE_NAME,"rv"),as:e(SN.Constants.SN_VI_STORE_NAME,"as"),a:e(SN.Constants.SN_AS_STORE_NAME,"a"),tp:e(SN.Constants.SN_AS_STORE_NAME,"tp"),vg:e(SN.Constants.SN_AS_STORE_NAME,"vg"),ti:e(SN.Constants.SN_AS_STORE_NAME,"ti")};for(var f in d)d.hasOwnProperty(f)&&(SN.Utils.undefinedOrNull(d[f])||(a[f]=d[f]))}}var g={key:SN.Conf.CONST_PSP_KEY};SN.Tracker.constructAndMakeTrackingCall(g,a,null,SN.Conf.trackingSecured)}function D(){var a=navigator.cookieEnabled;return t.environmentDetails.cookieEnabled=a,a?!0:(t.environmentDetails.ENS="cd",!1)}function E(){if(SN.Conf.pspServerType!="TIE"&&SN.Conf.pspServerType!="OE"){window.console&&typeof console.error=="function"&&console.error("Invalid PSP Server Type - Should be OE or TIE ");return}SN.Conf.earlyPageLoadEventRequired&&C();if(!x()||!D()||!y()||!z()){try{var a=SN.UserAgentParser,b={},d={};d[l]=q,d[i]=navigator.userAgent,d[j]=navigator.cookieEnabled,d[m]=p,d[k]=a.getBrowserLanguage(),d[n]=document.referrer,SN.Utils.undefinedOrNull(d.f)&&(d.f={}),SN.Utils.undefinedOrNull(d.f.p)&&(d.f.p={}),d.f.p.cp=unescape(parent.document.location.href);var e=SN.Conf.getOrderIDDetails();SN.Utils.undefinedOrNull(e)||(SN.Utils.undefinedOrNull(d.ed)&&(d.ed={}),d.ed.ed_orderID=e);var o={key:SN.Conf.CONST_PSP_KEY};b[h]=d,SN.Tracker.constructAndMakeTrackingCall(o,d,null,SN.Conf.trackingSecured),SN.CallBackToCustom&&SN.CallBackToCustom.onEnvironmentNotSupported(a.environmentDetails)}catch(r){SN.Logger.consoleLog("Error while making a tracking call: "+r)}return}if(!SN.Conf.IS_DS_REQUIRED&&SN.Conf.PEAK_HOUR_START!==0&&SN.Conf.PEAK_HOUR_STOP!=2400){SN.Tag.createSNIframeOnHead(SN.Conf.CONST_CDN_VERSION,SN.Conf.CONST_PSP_VERSION);return}var s=SN.DecisionEvaluator.getDecision();c=s.decision,f=s.pspVersion,g=s.cdnVersion,u()}var a="a",b="b",c=null,d="Windows",e="MacOS",f="default",g=null,h="e",i="bd",j="ce",k="bl",l="si",m="ec",n="rf",o="100000",p="500001",q="ENVNOTSUPPORTED",r={t:"test",d:"default"},s=SN.Logger,t=SN.UserAgentParser;E()}()