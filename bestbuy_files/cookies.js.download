$BV.Internal.define("cookies",[window,document],["exports","jquery.core","requester"],function(i,o,p,r,a){var s=/^[A-Za-z0-9!#$%&*+\-.^_`|~]+$/,t=s,j=/^[\x20-\x21\x23-\x26\x28-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]*$/,b=[];function f(v){var B={};try{if(v&&(v=r.trim(v))!==""){var x=v.split(/; */);for(var w=0;w<x.length;w++){var C=x[w],z=C.indexOf("=");if(z>0){var u=C.substring(0,z),A=C.substring(z+1);if(/^".*"$/.test(A)){A=A.substring(1,A.length-1);}if(j.test(A)){B[u]=A;}}}}}catch(y){$BV.log(y);}return B;}function n(u,v,y,w){try{u.cookie=c(v,"",y,w)+";expires=Thu, 01-Jan-1970 00:00:01 GMT";}catch(x){$BV.log(x);}}function h(u,w,y,A,x,v){try{u.cookie=c(w,y,A,x,v);}catch(z){$BV.log(z);}}function q(v,x,w){if(!w||k(w,i.location.host)){n(o,v,x,e(w,i.location.host));}else{var u=d(w);if(u){u.remove(v,x,w);}else{$BV.log("Cannot remove cookie on "+w+" because no frame is available");}}}function l(w,y,z,x,u){if(!x||k(x,i.location.host)){h(o,w,y,z,e(x,i.location.host),u);}else{var v=d(x);if(v){v.set(w,y,z,x,u);}else{$BV.log("Cannot set cookie on "+x+" because no frame is available");}}}function d(v){var w=a.findDocDomainFrame(function(y){return k(v,y.location.host);});if(w){return{parse:function(y){if(y){y(f(w.document.cookie));}},set:function(z,B,C,A,y,D){h(w.document,z,B,C,e(A,w.location.host),y);if(D){D();}},remove:function(y,A,z,B){n(w.document,y,A,e(z,w.location.host));if(B){B();}}};}for(var u=0;u<b.length;u++){var x=b[u];if(k(v,x.targetDomain)){return x;}}}function k(v,u){return a.domainMatches(v,u);}function e(v,u){return(v===u)?null:v;}function c(v,x,y,w,u){v=String(v);x=String(x);if(!s.test(v)){throw new Error("Invalid cookie name: "+v);}if(!j.test(x)){throw new Error("Invalid cookie value: "+x);}return v+"="+(t.test(x)?x:'"'+x+'"')+(y?";path="+y:"")+(w?";domain="+w:"")+(u?";expires="+u:"");}var g,m;r.extend(p,{parse:f,get:function(u){return p.parse(o.cookie)[u];},set:l,remove:q,registerDocDomainFrame:function(u){a.registerDocDomainFrame(u);},registerCrossDomainProxy:function(u){b.push(u);},parseFromDomainAsync:function(w,y){var z,x=$BV.Internal.newLatch(1),u=d(w);function v(A){z=A;x.release();}if(u){u.parse(v);}else{$BV.log("Cannot get cookies from "+w+" because no frame is available");v({});}return function(A){x.queue(function(){A(z,function B(C){q(C,y,w);});});};},detectCookieModificationSupport:function(x,v){var w="mod-test",z=Math.random();p.set(w,z,"",x);if(p.get(w)==z){p.remove(w,"",x);g=p.set;m=p.remove;}else{if(v){r('<iframe name="BVManageCookieFrame" src="javascript:false;"></iframe><form action="'+v+'" target="BVManageCookieFrame" name="BVManageCookieForm" method="POST" accept-charset="utf-8"><input type="hidden" name="name"/><input type="hidden" name="value"/><input type="hidden" name="path"/><input type="hidden" name="maxage"/></form>').appendTo("body");var u=o.forms.BVManageCookieForm;function y(A){if(!A){return -1;}var B=Math.round((Date.parse(A)-Date.now())/1000);if(B<0){B=0;}return B;}g=function(B,D,E,C,A){u.name.value=B;u.value.value=D;u.path.value=E;u.maxage.value=y(A);u.submit();};m=function(A,B){u.name.value=A;u.value.value="";u.path.value=B;u.maxage.value=0;u.submit();};}else{g=m=r.noop;}}},setCookieFunction:function(v,x,y,w,u){g(v,x,y,w,u);},removeCookieFunction:function(u,v){m(u,v);},getLegalCookieRegEx:function(u){return new RegExp(u);}});});