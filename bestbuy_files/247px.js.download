/*!
 * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an
 * unpublished, proprietary work which is fully protected under
 * copyright law. This code may only be used pursuant to a valid
 * license from 24/7 Customer, Inc.
 */
function startSessionAsync(a,b,c){if(a.fireflyAPI.startAPI!=null){apiKey=b.apiKey,cobrowseMode=b.cobrowseMode,fieldMaskingConfig=b.fieldMaskingConfig;try{var d=a.eventListeners[CobrowseVendor.Events.COBROWSE_INITIALIZED],e=a.eventListeners[CobrowseVendor.Events.COBROWSE_STARTED],f=a.eventListeners[CobrowseVendor.Events.COBROWSE_SESSION_UPDATED],g=a.eventListeners[CobrowseVendor.Events.COBROWSE_ENDED],h=a.eventListeners[CobrowseVendor.Events.COBROWSE_PARTICIPANT_JOINED];a.fireflyAPI.on("cobrowsingRequested",e),a.fireflyAPI.on("sessionDataUpdated",f),a.fireflyAPI.on("cobrowsingEnded",g),a.fireflyAPI.on("cobrowsingStarted",h),fieldMaskingConfig&&a.fireflyAPI.set("masking",JSON.parse(fieldMaskingConfig)),b.secureUrl!=null&&a.fireflyAPI.set("secureUrl",b.secureUrl),a.fireflyAPI.startAPI(apiKey,d)}catch(i){}}else{if(c==0)return;setTimeout(function(){startSessionAsync(a,b,--c)},1e3)}}function start247SessionAsync(a,b,c){typeof parent.isInit=="boolean"&&parent.isInit==1&&typeof parent.CreateSession=="function"?b.cobrowseMode=="CO_BROWSE"?parent.CreateSession("cobrowse",a.eventListeners[CobrowseVendor.Events.COBROWSE_INITIALIZED],a.eventListeners[CobrowseVendor.Events.COBROWSE_STARTED],this.coBrowse247API.sessionTimeout):parent.CreateSession("coview",a.eventListeners[CobrowseVendor.Events.COBROWSE_INITIALIZED],a.eventListeners[CobrowseVendor.Events.COBROWSE_STARTED],this.coBrowse247API.sessionTimeout):c!=0&&setTimeout(function(){start247SessionAsync(a,b,--c)},1e3)}function continueSessionAsync(a,b,c){if(a.continueSession!=null)a.continueSession(b);else{if(c==0)return;setTimeout(function(){continueSessionAsync(a,b,--c)},1e3)}}function continue247SessionAsync(a,b,c){typeof parent.isInit=="boolean"&&parent.isInit==1&&typeof parent.ContinueSession=="function"?parent.ContinueSession(b):c!=0&&setTimeout(function(){continue247SessionAsync(a,b,--c)},1e3)}function load247px(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=document.location.protocol+"//"+SN.Conf.cdnRoot+"/psp/platform/"+SN.Conf.JS_VERSION+"/247loader.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}window._tfsc=window._tfsc||parent._tfsc;if(!window._tfsc||!_tfsc.env)window._tfsc&&typeof _tfsc.getPath=="function"?_tfsc.env=function(){return _tfsc.STAGING_URL.match(/(.*?)\//)&&_tfsc.getPath().match(/(.*?)\//)[1]===_tfsc.STAGING_URL.match(/(.*?)\//)[1]?"s":_tfsc.PRODUCTION_URL.match(/(.*?)\//)&&_tfsc.getPath().match(/(.*?)\//)[1]===_tfsc.PRODUCTION_URL.match(/(.*?)\//)[1]?"p":"o"}():location.href.match(/[&#\?]env=([pos])(\/|&|$)/)?window._tfsc={env:location.href.match(/[&#\?]env=([pos])(\/|&|$)/)[1],getPath:function(){return location.href.match(/[&#\?]cdnPath=(.*?)(\/|&|$)/)?location.href.match(/[&#\?]cdnPath=(.*?)(\/|&|$)/)[1]+"/":location.host}}:window._tfsc={env:"p"};typeof SN=="undefined"&&(SN={}),SN.Conf=function(){function a(a){return a}function b(){var a=window.location.href;return a.indexOf("testsite1")!=-1?"X":a.indexOf("testsite2")!=-1?"Y":"id"}function c(){var a=b();return l[a]}function d(){return null}function j(){this.dataStore="cookie",this.viStore="cookie"}function k(){switch(_tfsc.env){case"p":e="tie.app.247-inc.net",f="d1af033869koo7.cloudfront.net",g="bestbuy.vs.assist.247-inc.net",h="bestbuy.ca.assist.247-inc.net",i="bestbuy-account-1";break;case"s":e="tie-stage.app.247-inc.net",f="d2j8jkom7xmn9n.cloudfront.net",g="bestbuy.vs.assist.staging.247-inc.net",h="bestbuy.ca.assist.staging.247-inc.net",i="bestbuy-account-1";break;case"o":e="tie-stage.app.247-inc.net",f=_tfsc.getPath().match(/(.*?)\//)[1],g="bestbuy.vs.assist.staging.247-inc.net",h="bestbuy.ca.assist.staging.247-inc.net",i="bestbuy-account-1"}}var e=null,f=null,g=null,h=null,i=null,l={id:""},m="cookie",n="localstorage";return k(),{CONST_PSP_KEY:"bestbuy-v1-001",CONST_CDN_VERSION:"20170207110137",COOKIEPATH:["bestbuy.com","bestbuybusiness.com","geeksquad.com"],tnt:"nemo-client-bestbuy",pspServerType:"TIE",JS_VERSION:"default",flowEnabled:!1,triggerEvalForEvents_TIE:[],working_hours:{monday_start:"9",monday_end:"18",tuesday_start:"9",tuesday_end:"18",wednesday_start:"9:20",wednesday_end:"18:30",thursday_start:"9",thursday_end:"20:30",friday_start:"9",friday_end:"18",saturday_start:"9",saturday_end:"18",sunday_start:"9",sunday_end:"18"},timezone:"+5:30",fpidInServer:!1,fpidFeatureActiveBrowsers:["s"],customStoresAndLifeTimesToBeRegistered:{"sn.ct":3600},CustomStoresToBeCleanedUp:[],blackListedVersions_browsers:{browserLevel:[],Firefox:[],Edge:[],Android:[],Version:[],Chrome:[],CriOS:[],MSIE:[]},blackListedVersions_OS:{OSLevel:[],Windows:[],Android:[],Linux:[],MacOS:[],iOS:[]},blacklistedDeviceTypes:[],trackingSecured:!1,pluginsToBeTracked:!1,mimeTypesToBeTracked:!1,browserGeoLocationFlag:!1,trackingUrlFlag:!1,varMapFlag:!1,varmap:{},earlyPageLoadEventRequired:!1,earlyPageLoadED:{},ACTIVE_SESSION_ID_SEED:1,startRunPollAuto:!0,RUN_CALL_POLLER_TIMEOUT:9e5,CONST_PSP_STAGE:"p",CONST_PSP_VERSION:"default",CUSTOM_TRACKING_PERCENTAGE:100,IS_DS_REQUIRED:!1,DS_dataStore:"localstorage",DECISION_LIFETIME:3600,TEST_PERCENTAGE:0,BYPASS_PERCENTAGE:0,TIE_PERCENTAGE:100,PEAK_HOUR_START:0,PEAK_HOUR_STOP:0,OFFPEAK_BYPASS:0,isViStoreSession:!1,IS_ADP_ENABLED:!1,ADP_BASE_URL:{uibuilder:"url for uibuilder","Gravity Form":"url for gravity form",FAQ:"url for faq","Guided Navigation":"url for gna",CTC:"url for click 2 call",Info:"url for info , faq",dss:"url for dss","Dss Get Instance":"url for dss/getinstance"},ADP_ACCOUNT_ID:"bestbuy-account-default",ADP_APP_ID:"8ac12771453be3b901453ce22e840001",ADP_APP_LIB_ID:"",DISABLED_COOKIES:[],ED:{},stnt:c,pspRoot:e,cdnRoot:f,getDecodedValue:a,getUrlId:b,getOrderIDDetails:d,setStoresToCookie:j,dataStore:n,viStore:m,CONST_ASSIST_VS_ROOT:g,CONST_ASSIST_CA_ROOT:h,CONST_ASSIST_ACCOUNT_ID:i,HLCachingEnabled:!0,eventBasedEvalTriggerEnabled:!0}}(),typeof SN=="undefined"&&(SN={}),SN.CustomInviteManager=function(){function r(){var a=document.getElementById("sn_iframe");SN.Utils.undefinedOrNull(a)&&(a=window),c=a.contentWindow}function s(a){c||r(),customScript=c.SN.CustomScript,n=c.SN.Utils,l=c.$setData,p=c.$undefinedOrNull,b=a,SN.CustomAvailabilityDecider.init(a)}function t(a,b){var d=parent.window.EventManager;a=a=="true",a&&c.$setData("trid",b),d.trigger("BlueAssist-IsAvailable",a)}function u(a,b){var d=parent.window.EventManager;a=a=="true";var e={"true":1,"false":0};a&&c.$setData("trid",b),d.trigger("ChatAssist-IsAvailable",e[a])}function v(){return g?1:0}function w(a){a="true"==a;if(customScript.isMobile()||customScript.mobileSiteLoaded())return;if(b.divId=="px-pe-entertainment"||b.ruleId=="directchat")return;b.ruleId=="invite"&&a?x():b.divId=="px-scheduler"?z(b,a):b.divId=="px-recon"?A(b,a):b.divId=="px-email"?B(b,a):b.divId=="px-button-chat"&&C(b,a)}function x(){function m(){clearTimeout(e),customScript.fireInviteEvent("11105",pcRuleId,"InviteIgnored",f.proclid),parent.document.getElementById("proactiveChat")&&h.removeChild(d),c.$setData("inviteDeclined","1"),isOverridePCDismissed=!0,g=!1,H()}if(SN.Conf.isCG())return;c||r();var d=parent.document.getElementById("proactiveChat"),h=parent.document.getElementsByTagName("body")[0];pcRuleId="day_zero_proactive_rule",f.proclid=customScript.randomUUID(),g=!0;if(p(d)){d=document.createElement("div"),d.setAttribute("role","alertdialog"),d.setAttribute("aria-live","assertive"),d.setAttribute("aria-atomic","true"),d.setAttribute("aria-label","Need Help"),d.setAttribute("tabindex",-1);var i=parent.document.body.clientWidth/2,j=i-150;G(),d.id="proactiveChat",d.innerHTML='<div id="proactive-invite" style="position:fixed;bottom:50px;left:'+j+"px;width:300px;height:210px;z-index:1000;background:url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+'/apps/invite/img/pc-invite-ccq.png) no-repeat 0px; -moz-box-shadow: 0 5px 10px #ccc;-webkit-box-shadow: 0 5px 10px #ccc;box-shadow: 0 5px 10px #ccc;zoom: 1;filter:progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=0,strength=1),progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=45,strength=1),progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=90,strength=2),progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=135,strength=3),progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=180,strength=10),progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=225,strength=3),progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=270,strength=2),progid:DXImageTransform.Microsoft.Shadow(color=#dddddd,direction=315,strength=1);"><div id="proactive-chat-now" role="button" tabindex="0" style="height: 35px; width: 90px;  top: 97px; left: 20px; position: relative;  cursor: pointer;" title="Chat Now"></div><div id="cancel-proactive" role="button" tabindex="0" style="position: relative; bottom: 23px; left: 278px; width: 10px; height: 10px; cursor: pointer;" title="Close Chat"></div></div>',h.appendChild(d),document.getElementById("proactive-invite").focus(),document.getElementById("proactive-chat-now").focus(),customScript.incSessionInviteCount(),customScript.fireInviteEvent(a.invite_offered,pcRuleId,"InviteOffered",f.proclid),customScript.setLI();var k=parent.document.getElementById("proactive-chat-now");k&&(c.Event.observe(k,"click",function(){c.Event.stopObserving(k,"click"),n.info("Calling accept function for dockButton with ruleid: "+pcRuleId),customScript.accept("dockButton",pcRuleId,f.proclid,"p"),E()}),c.Event.observe(k,"keydown",function(a){c.Event.stopObserving(k,"keydown");if(a.keyCode===13||a.keyCode===32)n.info("Calling accept function for dockButton with ruleid: "+pcRuleId),customScript.accept("dockButton",pcRuleId,f.proclid,"p"),E()}),customScript.bbyButtonClick(k));var l=parent.document.getElementById("cancel-proactive");l&&(c.Event.observe(l,"click",function(){c.Event.stopObserving(l,"click"),m()}),c.Event.observe(l,"keydown",function(a){c.Event.stopObserving(l,"keydown"),(a.keyCode===13||a.keyCode===32)&&m()}))}e=setTimeout(function(){d=parent.document.getElementById("proactiveChat"),h=parent.document.getElementsByTagName("body")[0],parent.document.getElementById("proactiveChat")&&d&&d.parentNode==h&&(h.removeChild(d),customScript.fireInviteEvent(a.proactive_ignored,pcRuleId,"InviteIgnored",f.proclid)),checkAvailPC=0,isOverridePCDismissed=!0,g=!1,checkAvailabilityFlag=!0,b.ruleId=customScript.getByPageDivId("ruleid"),H()},45e3)}function y(b,d){pcRuleId=customScript.getByPageDivId("ruleid"),f.proclid=customScript.randomUUID(),k||(customScript.fireInviteEvent(a.invite_offered,pcRuleId,"InviteOffered",f.proclid),k=!0);var e=parent.document.getElementById(b);e&&(c.Event.observe(e,"click",function(){n.info("Calling accept function for dockButton with ruleid: "+pcRuleId),customScript.accept("dockButton",pcRuleId,f.proclid,"b");if(b=="px-email-chat-now"){var a=parent.document.getElementById("px-email");a.innerHTML=d}else e.innerHTML=d}),customScript.bbyButtonClick(e))}function z(a,b){if(SN.Conf.isCG())return;var c=parent.document.getElementById("px-scheduler"),d="<div id='px-scheduler-main' style='width:210px;height:30px;background:url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+"/apps/invite/img/scheduler-busy.png) no-repeat 20px;'>"+" <div id='px-scheduler-chat-now-disabled' title='All our chat representatives are currently helping other customers. Please try chat again later. We apologize for the inconvenience' style='width:190px;height:30px;float: left;cursor:pointer;'></div></div>";c.innerHTML=d;if(customScript.getTfsonChat()==1)return;b?(c.innerHTML="<div id='px-scheduler-main' style='width:210px;height:30px;background:url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+"/apps/invite/img/scheduler-available.png) no-repeat 20px;'>"+" <div id='px-scheduler-chat-now' title='Chat Now' style='width:190px;height:30px;float: left;cursor:pointer;'></div></div>",y("px-scheduler-chat-now",d),o=!0):customScript.isOutOfOffice()&&(c.innerHTML="<div id='px-scheduler-main' style='width:210px;height:30px;background:url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+"/apps/invite/img/scheduler-busy.png) no-repeat 20px;'>"+" <div id='px-scheduler-chat-now-disabled' title='Our chat program is currently closed. Chat is available 7 days a week, 9 a.m. ET to 11 p.m. ET. Please try chat during our open hours' style='width:190px;height:30px;float: left;cursor:pointer;'></div></div>")}function A(a,b){if(SN.Conf.isCG())return;var c=parent.document.getElementById("px-recon"),d="<div id='px-scheduler-main' style='width:210px;height:30px;background:url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+"/apps/invite/img/scheduler-busy.png) no-repeat 20px;'>"+" <div id='px-scheduler-chat-now-disabled' title='All our chat representatives are currently helping other customers. Please try chat again later. We apologize for the inconvenience' style='width:190px;height:30px;float: left;cursor:pointer;'></div></div>";c.innerHTML=d;if(customScript.getTfsonChat()==1)return;b?(c.innerHTML="<div id='px-scheduler-main' style='width:210px;height:30px;background:url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+"/apps/invite/img/scheduler-available.png) no-repeat 20px;'>"+" <div id='px-scheduler-chat-now' title='Chat Now' style='width:190px;height:30px;float: left;cursor:pointer;'></div></div>",y("px-scheduler-chat-now",d),o=!0):customScript.isOutOfOffice()&&(c.innerHTML="<div id='px-scheduler-main' style='width:210px;height:30px;background:url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+"/apps/invite/img/scheduler-busy.png) no-repeat 20px;'>"+" <div id='px-scheduler-chat-now-disabled' title='Our chat program is currently closed. Chat is available 5 days a week, 9:30 a.m. ET to 6 p.m. ET. Please try chat during our open hours' style='width:190px;height:30px;float: left;cursor:pointer;'></div></div>")}function B(a,b){if(SN.Conf.isCG())return;var c=parent.document.getElementById("px-email"),d="<div id='px-email-main' style='width:350px;height:203px;background:url(//"+SN.Conf.CDN_DOMAIN+"bestbuy/"+SN.Conf.CONST_CDN_VERSION+"/chatapp/img/chat-with-expert-grey.png) no-repeat 0px;'>"+"<div id='px-email-chat-now-disabled' title='All our chat representatives are currently helping other customers. Please try chat again later. We apologize for the inconvenience.' role='button' tabindex = '0' style='width:177px;height:49px;position:relative;top:108px;left:20px;cursor:pointer;'></div></div>";c.innerHTML=d;if(customScript.getTfsonChat()==1)return;b?(c.innerHTML="<div id='px-email-main' style='width:350px;height:203px;background:url(//"+SN.Conf.CDN_DOMAIN+"bestbuy/"+SN.Conf.CONST_CDN_VERSION+"/chatapp/img/chat-with-expert-blue.png) no-repeat 0px;'>"+"<div id='px-email-chat-now' title='For immediate assistance, Chat with an expert.' role='button' tabindex = '0' style='width:177px;height:35px;top:108px;left:20px;position:relative;cursor:pointer;'></div></div>",y("px-email-chat-now",d),o=!0):customScript.isOutOfOffice()&&(c.innerHTML="",clearInterval(q),SN.CustomAvailabilityDecider.removeAvailabilityCheck("dockbutton"))}function C(a,b){if(!b||customScript.getTfsonChat()==1||o)return;var c=parent.document.getElementById("px-button-chat");c.setAttribute("style","border-left: 0px; border-right: 1px solid #878177; margin: 0px 10px 0px 0px; padding: 0 22px 0px 0; color: #91D7EA; font-weight: bold; cursor: pointer"),c.innerHTML="Chat <div style='position: absolute; top: 6px; left: 38px;'><img src='//"+SN.Conf.CDN_DOMAIN+"bestbuy/"+SN.Conf.CONST_CDN_VERSION+"/bbfbchatapp/img/available.png'></div>",y("px-button-chat",""),o=!0}function D(b,d){if(g||h&&d)return;if(SN.Conf.isCG()||customScript.getTfsonChat()==1)return;var e=b.ruleId;checkAvailabilityFlag=!0;var k=parent.document.getElementById("dockButton"),l=parent.document.getElementsByTagName("body")[0];c||r();var o=customScript.getByPageDivId("id");p(k)&&(k=document.createElement("div"),k.id="dockButton",l.appendChild(k)),d?(k.innerHTML="<div id='dock-invite' style='position:fixed;top:50%;margin-top:-62px;right: 0px;width:44px;height:124px;float:right;z-index:1000;background:white url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+"/apps/invite/img/dock-available.png) no-repeat 0px;'><div id='dock-chat-now' style='height: 124px; width: 44px;  top: 0px; left: 0px; position: relative;  cursor: pointer;' title='Chat Now' role='button' tabindex = '0'></div></div>",f.proclid=customScript.randomUUID(),c.$setData("clid",f.proclid),i||(customScript.fireInviteEvent(a.invite_offered,e,"InviteOffered",f.proclid),i=!0),h=!0):customScript.isOutOfOffice()?(F(),h=!1,m=!1):(k.innerHTML="<div id='dock-invite' style='position:fixed;top:50%;margin-top:-62px;right: 0px;width:44px;height:124px;float:right;z-index:1000;background:white url(//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/default/"+SN.Conf.CONST_CDN_VERSION+"/apps/invite/img/dock-busy.png) no-repeat 0px;'><div id='dock-chat-now-disabled' style='height: 124px; width: 44px;  top: 0px; left: 0px; position: relative;  cursor: pointer;' title='Our chat representatives are assisting other customers. Please try again later or call 1-888-BEST BUY (1-888-237-8289).'></div></div>",j||(customScript.fireInviteEvent(a.show_greyButton,e,"GreyChatButton",f.proclid),j=!0),m=!0);var q=parent.document.getElementById("dock-chat-now");q&&(c.Event.observe(q,"click",function(){c.Event.stopObserving(q,"click"),n.info("Calling accept function for dockButton with ruleid: "+e),customScript.accept("dockButton",e,f.proclid,"b"),G()}),customScript.bbyButtonClick(q));var s=parent.document.getElementById("dock-chat-now-disabled");s&&c.Event.observe(s,"click",function(){customScript.fireInviteEvent(a.greyButton_clicked,e,"GreyChatButtonClicked",f.proclid)})}function E(){var a=parent.document.getElementById("proactiveChat"),b=parent.document.getElementsByTagName("body")[0];p(a)||b.removeChild(a)}function F(){var a=parent.document.getElementById("dockButton"),b=parent.document.getElementsByTagName("body")[0];p(a)||b.removeChild(a)}function G(){if(!J())return;SN.CustomAvailabilityDecider.removeAvailabilityCheck("dockbutton"),F(),h=!1,i=!1,k=!1,j=!1,m=!1,o=!1}function H(){if(customScript.isBlueAssistChat())return;b.ruleId=customScript.getByPageDivId("ruleid");var a=1;clearInterval(q),I(),q=setInterval(function(){I(),a++>=7&&clearInterval(q)},1e4)}function I(){SN.CustomAvailabilityDecider.checkAvailability({cb:SN.CustomInviteManager.checkAvailability,id:"dockbutton",type:SN.CustomAvailabilityDecider.TYPE.REPEAT})}function J(){return h||m||o}var a={invite_offered:"11103",invite_accepted:"11104",show_greyButton:"100010",greyButton_clicked:"100010",proactive_ignored:"11106"},b="",c="",d=!1,e=null,f={},g=!1,h=!1,i=!1,j=!1,k=!1,l,m=!1,n,o=!1,p,q=null;return{showDockButton:D,initInvite:s,checkAvailability:w,resetDockButton:G,dismissInvite:E,isInviteActive:v,triggerButton:H,blueAssistCACallback:t,mobileChatAssistCACallback:u}}(),typeof SN=="undefined"&&(SN={}),SN.CustomAvailabilityDecider=SN.CustomAvailabilityDecider||function(){function p(a){var b={};typeof a=="function"?(b.cb=arguments[0],b.id=arguments[1],b.type=arguments[2]):b=a;if(l(b.cb)||typeof b.cb!="function")throw new TypeError("CA_DECIDER: Provide callback function");if(l(b.qu)||typeof b.qu!="string"){if(!!l(i.defqueue))throw new TypeError("CA_DECIDER: Provide queue name");b.qu=i.defqueue}if(l(b.id)){var c=10,d="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";b.id="GEN_";for(var f=c;f>0;--f)b.id+=d[Math.round(Math.random()*(d.length-1))]}return l(b.type)&&(parent.SN.Conf.eventBasedEvalTriggerEnabled?b.type=e.ONLY_IF_TRUE:b.type=e.ONLY_ONCE),q({id:b.id,type:b.type,qu:b.qu,cb:b.cb}),v(b.qu),!0}function q(a){A(a.qu),h[a.id]=a}function r(a){delete h[a]}function s(a){var b=[];for(var c in h)if(h.hasOwnProperty(c)){var d=!1;for(var e in a)if(a.hasOwnProperty(e)&&h[c][e]!==a[e]){d=!0;break}d||b.push(h[c])}return b}function t(){return H()!=g.WINDOW_CLOSED&&H()!=g.NO_STATUS?!0:!1}function u(c,d,e,f){var g=(new Date).getTime();g-B(c,"lastResponse")<a?y(d,e,f):g-B(c,"lastRequest")>b&&(x(c),C(c,"lastRequest",g))}function v(a){var b=null,c=f.FALSE,d=null;if(t())b=s(null),c=f.CHATTING,y(b,c,null);else if(l(a))for(var e in h)h.hasOwnProperty(e)&&(b=s({qu:h[e].qu}),c=B(h[e].qu,"status"),d=c==="true"?B(h[e].qu,"trackingId"):null,u(h[e].qu,b,c,d));else b=s({qu:a}),c=B(a,"status"),d=c==="true"?B(a,"trackingId"):null,u(a,b,c,d)}function w(a,b){return Math.floor(Math.random()*(b-a+1))+a}function x(a){var b="av"+(new Date).getTime()+"r"+w(1e3,9999);window[b]=E(b,a);if(l(i.overrideResponse)){var c=document.createElement("script");c.id=b,c.src=z(b,a),c.type="text/javascript",document.body.appendChild(c)}else i.overrideResponse?window[b]({data:{caStatus:"true",trackingId:"DEBUG01$12345"}}):window[b]({data:{caStatus:"false"}})}function y(a,b,c){for(var d=0;d<a.length;d++){var g=a[d].cb;switch(a[d].type){case e.ONLY_ONCE:r(a[d].id),g(b,c);break;case e.REPEAT:g(b,c);break;case e.ONLY_IF_TRUE:b==f.TRUE&&(r(a[d].id),g(b,c));break;case e.ON_CHAT:b==f.CHATTING&&(r(a[d].id),g(b,c))}g=null}}function z(a,b){if(l(a))throw new TypeError("CA_DECIDER: CA requested without callback");if(l(b))throw new TypeError("CA_DECIDER: CA requested without queue");l(i.overrideQueue)||(b=i.overrideQueue);var c="https://"+i.caserver+"/en/ca/rest/checkAvailability"+"?queueId="+b+"&accountId="+i.accountId+"&jsonp="+a,d=B(b,"trackingId");return l(d)||(c+="&trackingId="+d),c}function A(a){return l(a)?null:(a in j||(j[a]={status:f.FALSE,lastRequest:0,lastResponse:0,trackingId:null}),j[a])}function B(a,b){var c=A(a);return c[b]}function C(a,b,c){var d=A(a);d[b]=c}function D(a){if(l(a.qu))return!1;A(a.qu),l(a.lastRequest)||C(a.qu,"lastRequest",a.lastRequest),!l(a.lastResponse)&&!l(a.status)&&(C(a.qu,"lastResponse",a.lastResponse),C(a.qu,"status",a.status),l(a.trackingId)||C(a.qu,"trackingId",a.trackingId))}function E(a,b){return function(c){var d,e;d=c&&c.data&&c.data.caStatus,d==="true"&&typeof c.data.trackingId=="string"&&(e=c.data.trackingId),D({qu:b,status:d,trackingId:e,lastResponse:(new Date).getTime()}),v(b);var f=document.getElementById(a);f&&f.parentNode.removeChild(f);try{delete window[a]}catch(g){window[a]=undefined}}}function F(){m.observe(d,function(a){var b=1;a&&a.memo&&a.memo.data&&a.memo.data.iterationId&&(b=a.memo.data.iterationId);var c=G(b);for(var d=0;d<c.length;d++)v(c[d])})}function G(a){var b=[],d={},f=[],g=[],h=0,i=null;if(a<=c){f=s({type:e.REPEAT});for(h=0;h<f.length;h++)d[f[h].qu]=!0;g=s({type:e.ONLY_IF_TRUE});for(h=0;h<g.length;h++)d[g[h].qu]=!0}for(i in d)d.hasOwnProperty(i)&&b.push(i);return b}function H(){return k}function I(a){return i[a]}function J(a){window.console&&console.warn&&typeof console.warn=="function"&&console.warn(a)}function K(e){if(!e.caserver)throw new TypeError("CA_DECIDER: Provide valid CA server domain");i.caserver=e.caserver,e.cb&&(h.dockbutton.cb=e.cb),e.defqueue&&typeof e.defqueue=="string"?(i.defqueue=e.defqueue,h.dockbutton.qu=e.defqueue):e.avqueue&&typeof e.avqueue=="string"&&(i.defqueue=e.avqueue,J("CA_DECIDER: avqueue deprecated. Replace with defqueue")),e.overrideQueue&&(i.overrideQueue=e.overrideQueue),e.overrideResponse&&(i.overrideResponse=e.overrideResponse);if(!e.accountId)throw new TypeError("CA_DECIDER: Provide valid accound id");i.accountId=e.accountId,e.vsserver?i.vsserver=e.vsserver:J("CA_DECIDER: Providing VS Server is advisable"),e.repeatTill&&(c=e.repeatTill),e.trackingId&&(trackingId=e.trackingId),e.reqThreshold&&(b=e.reqThreshold*1e3),e.resThreshold&&(a=e.resThreshold*1e3);if(e.observePollEvent)d=e.observePollEvent;else{if(!n.CONST_PERIODICAL_EXECUTION_TIMER_EVENT)throw new TypeError("CA_DECIDER: Provide poll event to observe or include SN.Constants class");d=n.CONST_PERIODICAL_EXECUTION_TIMER_EVENT}}function L(a){var b=document.getElementById("sn_iframe");return SN.Utils.undefinedOrNull(b)&&(b=window),o=b.contentWindow,l=o.$undefinedOrNull,m=o.SN.EventManager,n=o.SN.Constants,K(a),l(i.defqueue)||x(i.defqueue),!SN.Conf.isCG()&&!o.SN.CustomScript.isBlueAssistChat()&&F(),this.TYPE=e,this.checkAvailability=p,this.getAssistConfig=I,this.init=function(){return!1},!0}var a=6e3,b=3e3,c=8,d="",e={ONLY_ONCE:0,REPEAT:1,ONLY_IF_TRUE:2,ON_CHAT:3},f={CHATTING:"chatting",TRUE:"true",FALSE:"false"},g={WINDOW_OPENED:"windowOpened",WINDOW_LOADED:"windowLoaded",CHAT_CONNECTED:"onChat",CHAT_INTERACTIVE:"interactive",CHAT_ENDED:"ended",WINDOW_CLOSED:"windowClosed",NO_STATUS:""},h={dockbutton:{id:"dockbutton",cb:SN.CustomInviteManager.checkAvailability,type:e.REPEAT}},i={queue:"e93b0e25-ae60-48e3-9e1a-26e5cda49c9d",avqueue:"e93b0e25-ae60-48e3-9e1a-26e5cda49c9d",accountId:"bestbuy-account-1",server:SN.Conf.CONST_ASSIST_VS_ROOT,caserver:SN.Conf.CONST_ASSIST_CA_ROOT},j={},k=g.NO_STATUS,l,m,n,o="";return{init:L,getChatState:H,CA_STATUS:f,isChatting:t,removeAvailabilityCheck:r,checkAvailability:p}}(),typeof SN=="undefined"&&(SN={}),SN.MetaLayer=function(){function c(){try{a.hasOwnProperty("sc-meta-layer/javascript/metaLayer")&&a.hasOwnProperty("eventmanager")?require(["sc-meta-layer/javascript/metaLayer","eventmanager"],function(a,b){function c(){var a=d();document.getElementById("sn_iframe").contentWindow.SN.CustomScript.fireStateChangeEvent(a)}function d(){var b={};return b.catName=a.get("catName"),b.catId=a.get("catId"),b.parentCatName=a.get("parentCatName"),b.uberCatName=a.get("uberCatName"),b}a&&b.on("checkoutStateChange",c)}):a.hasOwnProperty("eventmanager")&&require(["eventmanager"],function(a){function b(){window.track.catName=="Thank"&&document.getElementById("sn_iframe").contentWindow.SN.CustomScript.fireSchedulerStateChangeEvent()}a&&a.on("page:stateChange",b)})}catch(b){}}function d(b){try{a.hasOwnProperty("sc-meta-layer/javascript/metaLayer")&&require(["sc-meta-layer/javascript/metaLayer"],function(a){return a?a.get(b):""})}catch(c){}}try{var a=require.s.contexts._.defined}catch(b){}return{bindStateChangeEvent:c,getPageContextVars:d}}(),SN.VisitorFiltering=function(){function a(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c*24*60*60*1e3);var f="expires="+e.toUTCString();document.cookie=a+"="+b+d+f}function b(a,b){var c=a+"=",d=document.cookie.split(b);for(var e=0;e<d.length;e++){var f=d[e];while(f.charAt(0)==" ")f=f.substring(1);if(f.indexOf(c)==0)return f.substring(c.length,f.length)}return""}function c(a,b,c,d){var e=new Date;e.setTime(e.getTime()+c*24*60*60*1e3);var f=e.toUTCString(),g=b+d+f;localStorage.setItem(a,g)}function d(a,b){try{var c=localStorage.getItem(a),d="";if(typeof c!="undefined"&&c!=null){var f=new Date,g=c.split(b),h=new Date(g[1]),i=h.getTime();i>f.getTime()?d=g[0]:(localStorage.removeItem(a),d=null)}else d=null;return d}catch(j){console&&console.log&&console.log("error in getting item from localstore"+e)}}function f(){try{var a=null;return SN.Conf.DS_dataStore=="localstorage"?a=d(SN.VisitorFiltering.IP_FLAG,SN.VisitorFiltering.STORE_DELIMITER):SN.Conf.DS_dataStore=="cookie"&&(a=b(SN.VisitorFiltering.IP_FLAG,SN.VisitorFiltering.STORE_DELIMITER)),a}catch(c){console&&console.log&&console.log("error in getting flag from localstore"+c)}}function g(b){try{var d=b;SN.Conf.DS_dataStore=="localstorage"?b==="0"?c(SN.VisitorFiltering.IP_FLAG,d,SN.VisitorFiltering.IP_FLAG_EXPIRES_UNBLOCKED_USER,SN.VisitorFiltering.STORE_DELIMITER):c(SN.VisitorFiltering.IP_FLAG,d,SN.VisitorFiltering.IP_FLAG_EXPIRES_BLOCKED_USER,SN.VisitorFiltering.STORE_DELIMITER):SN.Conf.DS_dataStore=="cookie"&&(b==="0"?a(SN.VisitorFiltering.IP_FLAG,d,SN.VisitorFiltering.IP_FLAG_EXPIRES_UNBLOCKED_USER,SN.VisitorFiltering.STORE_DELIMITER):a(SN.VisitorFiltering.IP_FLAG,d,SN.VisitorFiltering.IP_FLAG_EXPIRES_BLOCKED_USER,SN.VisitorFiltering.STORE_DELIMITER))}catch(e){console&&console.log&&console.log("error in setting flag in datastore:"+e)}}function i(){var a={url:SN.VisitorFiltering.API_URL,data:{clientid:SN.VisitorFiltering.API_DATA_CLIENT_ID,feature:SN.VisitorFiltering.API_DATA_FEATURE,type:SN.VisitorFiltering.API_DATA_TYPE,key:SN.VisitorFiltering.API_DATA_KEY,cb:"SN.VisitorFiltering.parseFindKeyInListResponse"}};h(a)}function j(a){try{var b=a.status,c=a.errorCode,d=a.message;switch(b){case!0:g("1");break;case!1:g("0");break;case"error":console&&console.log&&console.log("error in API response callback"+c+" "+d)}}catch(e){console&&console.log&&console.log("error in API response callback"+e)}}var h=function(b){var c=b.url;(c===null||typeof c=="undefined")&&b.callback({message:"url is a mandatory field. Please provide correct url"});var d=b.data,e="";for(var f in d)d.hasOwnProperty(f)&&(e+=f+"="+d[f]+"&");c=c+"?"+e+"domain="+window.location.hostname;if(c){var g=document.createElement("script");g.src=c,document.body.appendChild(g)}},k={setCookie:a,getCookie:b,setItem:c,getItem:d,getIPFlagInDatastore:f,setIPFlagInDatastore:g,findKeyInList:i,parseFindKeyInListResponse:j,IP_ADDRESS_BLOCK_ENABLED:!0,IP_ADDRESS_SOLUTION_LEVEL:!1,IP_ADDRESS_CHAT_LEVEL:!0,IP_FLAG:"ipfg",API_URL:_tfsc.env&&_tfsc.env==="s"?"https://integrate-staging.app.247-inc.net/api/filters/findKeyInList":"https://integrate.app.247-inc.net/api/filters/findKeyInList",API_DATA_CLIENT_ID:"bestbuy",API_DATA_FEATURE:"chat",API_DATA_TYPE:"ip",API_DATA_KEY:"",STORE_DELIMITER:";",IP_FLAG_EXPIRES_BLOCKED_USER:"1",IP_FLAG_EXPIRES_UNBLOCKED_USER:"1"};return k}(),typeof SN=="undefined"&&(SN={}),typeof SN.WOWPx=="undefined"&&(SN.WOWPx={}),SN.WOWPx.CustomCobrowse=function(){function l(b,c){if(b==="sn.cbr"&&!h(c)&&c!==""&&!h(c.event)&&c.state===CobrowseVendor.Events.COBROWSE_PARTICIPANT_JOINED){var d=c.event;a.continueSession(d.cookieData)}}function n(a){var b="visible",c="hidden",d={focus:b,focusin:b,pageshow:b,blur:c,focusout:c,pagehide:c},e="";a=a||window.event,a.type in d?e=d[a.type]:e=this[m]?"hidden":"visible",e=="visible"?(window.hasfocus=!0,A()):window.hasfocus=!1}function o(b,c){var d=100,e=100,f=0;typeof a.fireflyAPI.startAPI=="undefined"&&f<d?(f+=1,window.setTimeout(o,e)):typeof a.fireflyAPI.startAPI!="undefined"&&(h(c)?SN.CrossXDataHandler.getLocalStorageItem("sn.cbr",function(a,b){var c=JSON.parse(b);l(a,c)}):l(b,c))}function p(b,c){SN.CrossXDataHandler.getLocalStorageItem("sn.cbr.session",function(b,c){if(!h(c)&&c!=""){var d=JSON.parse(c);a.continueSession(d.cookieData)}else SN.CrossXDataHandler.setLocalStorageItem("sn.cbr",JSON.stringify({origin:"MAIN",state:"ERROR",message:"session id not found"}),36e5,function(a){})})}function q(){h(a)&&(a=new CobrowseVendor.FireFlyAPI,r(a),a.addCobrowseTag("51b12e51e035634a60000697","https://cobrowse-bby.s3.amazonaws.com/scripts/loaders/loader.js",!0,!1,18e6,"production"))}function r(a){var c=null;a.registerCallbackHandler(CobrowseVendor.Events.COBROWSE_ENDED,function(){var a;typeof a=="undefined"&&(a={}),b=!1,a.origin="MAIN",a.state=CobrowseVendor.Events.COBROWSE_ENDED,a.eventTime=(new Date).getTime(),SN.CrossXDataHandler.setLocalStorageItem("sn.cbr",JSON.stringify(a),36e5,function(a){}),SN.CrossXDataHandler.setLocalStorageItem("sn.cbr.session","",36e5,function(a){}),CobrowseSatus.sessionStatus=CobrowseVendor.Events.COBROWSE_ENDED}),a.registerCallbackHandler(CobrowseVendor.Events.COBROWSE_INITIALIZED,function(a){c=a;var b;typeof b=="undefined"&&(b={}),b.origin="MAIN",b.state=CobrowseVendor.Events.COBROWSE_INITIALIZED,b.url=c,b.eventTime=(new Date).getTime()}),a.registerCallbackHandler(CobrowseVendor.Events.COBROWSE_STARTED,function(a){var d;typeof d=="undefined"&&(d={}),b=!0,d.origin="MAIN",d.state=CobrowseVendor.Events.COBROWSE_STARTED,d.url=c,d.event=a,d.eventTime=(new Date).getTime(),SN.CrossXDataHandler.setLocalStorageItem("sn.cbr.session",JSON.stringify(a),36e5,function(a){}),setTimeout(function(){SN.CrossXDataHandler.setLocalStorageItem("sn.cbr",JSON.stringify(d),36e5,function(a){})},200)}),a.registerCallbackHandler(CobrowseVendor.Events.COBROWSE_PARTICIPANT_JOINED,function(){var a;typeof a=="undefined"&&(a={}),a.origin="MAIN",a.state=CobrowseVendor.Events.COBROWSE_PARTICIPANT_JOINED,a.eventTime=(new Date).getTime(),SN.CrossXDataHandler.setLocalStorageItem("sn.cbr",JSON.stringify(a),36e5,function(a){})})}function s(b){h(a)&&!d?(a=new CobrowseVendor.CoBrowse247API,r(a),a.addCobrowseTag("51964e5268036b4d5400000c","https://assist-cobrowse.app.247-inc.net/screenshare.js",!1,null,6e5,"staging"),d=!0):!h(a)||!d}function z(){return e}function A(){SN.CrossXDataHandler.getLocalStorageItem("sn.cbr",function(a,b){var c=!h(b)&&b!=""?JSON.parse(b):null;if(w==c)return;w=c;if(!h(c)){e=c.state;if(c.state===CobrowseVendor.Events.COBROWSE_PARTICIPANT_JOINED||c.state===CobrowseVendor.Events.COBROWSE_STARTED){if(y)return;s(),p(a,c),y=!0}else if(c.state===CobrowseVendor.Events.COBROWSE_INITIALIZED||c.state==="START_SESSION"){if(x)return;s(c.cobrowseArgs),D(c.cobrowseArgs),x=!0}else c.state===CobrowseVendor.Events.COBROWSE_ENDED&&B()}})}function B(){e=CobrowseVendor.Events.COBROWSE_ENDED,x=!1,y=!1,h(a)||a.endSession()}function C(){var b=100,c=100,d=0;typeof a.fireflyAPI.startAPI=="undefined"&&d<b?(d+=1,window.setTimeout(C,c)):typeof a.fireflyAPI.startAPI!="undefined"&&a.startSession({apiKey:"51b12e51ab8be54a60000001",cobrowseMode:"CO_BROWSE",fieldMaskingConfig:{"*":[".bby-creditCard-expirationYear",".bby-creditCard-number",".bby-creditCard-cid",".bby-creditCard-expirationMonth","input[name='TxtCardNumber']"]}})}function D(b){var c=b[0];a.startSession({apiKey:c,cobrowseMode:b[6],fieldMaskingConfig:{"*":[".bby-creditCard-expirationYear",".bby-creditCard-number",".bby-creditCard-cid",".bby-creditCard-expirationMonth","input[name='TxtCardNumber']"]}})}function E(){SN.CrossXDataHandler.setLocalStorageItem("sn.cbr","",36e5,function(a){})}var a=null,b=!1,c=!1,d=!1,e=null,f=document.getElementById("sn_iframe");SN.Utils.undefinedOrNull(f)&&(f=window);var g=f.contentWindow,h=g.$undefinedOrNull,i=g.SN.CrossXDataHandler;SN.CrossXDataHandler=i;var j=g.SN.XDFrameMessagingUtils;SN.XDFrameMessagingUtils=j;var k="https://"+g.SN.Utils.getPSPServerName(),m="hidden";window.hasfocus=!1,m in document?document.addEventListener("visibilitychange",n):(m="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(m="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(m="msHidden")in document?document.addEventListener("msvisibilitychange",n):"onfocusin"in document?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n;var t=!1,u=!1,v=null,w="",x=!1,y=!1;return window.setTimeout(function(){A()},10),{clear:E,isCobrowseTaggingRequired:A,getCobrowseStatus:z,endCobrowseSession:B}};var CobrowseVendor={},CobrowseSatus={};CobrowseSatus.sessionStatus="NA",CobrowseVendor.Events={COBROWSE_INITIALIZED:"INITIALIZED",COBROWSE_STARTED:"STARTED",COBROWSE_PARTICIPANT_JOINED:"JOINED",COBROWSE_PARTICIPANT_LEFT:"LEFT",COBROWSE_ENDED:"ENDED",COBROWSE_ERROR:"ERROR"},CobrowseVendor.API=function(){},CobrowseVendor.API.prototype.getCobrowseVendorId=function(){},CobrowseVendor.API.prototype.addCobrowseTag=function(){},CobrowseVendor.API.prototype.startSession=function(a){},CobrowseVendor.API.prototype.endSession=function(){},CobrowseVendor.API.prototype.registerCallbackHandler=function(a,b){},CobrowseVendor.API.prototype.continueSession=function(a){},typeof window.fireflyAPI=="undefined"&&(window.fireflyAPI={}),typeof window.coBrowse247API=="undefined"&&(window.coBrowse247API={}),CobrowseVendor.FireFlyAPI=function(){CobrowseVendor.API.call(this),this.VENDOR_ID="FireFly",this.fireflyAPI=parent.window.fireflyAPI,this.eventListeners={}},CobrowseVendor.CoBrowse247API=function(){CobrowseVendor.API.call(this),this.VENDOR_ID="CoBrowse247API",this.coBrowse247API=window.coBrowse247API,this.eventListeners={}},CobrowseVendor.FireFlyAPI.prototype=new CobrowseVendor.API,CobrowseVendor.FireFlyAPI.prototype.constructor=CobrowseVendor.FireFlyAPI,CobrowseVendor.FireFlyAPI.prototype.getCobrowseVendorId=function(){return this.VENDOR_ID},CobrowseVendor.CoBrowse247API.prototype=new CobrowseVendor.API,CobrowseVendor.CoBrowse247API.prototype.constructor=CobrowseVendor.CoBrowse247API,CobrowseVendor.CoBrowse247API.prototype.getCobrowseVendorId=function(){return this.VENDOR_ID},CobrowseVendor.FireFlyAPI.prototype.addCobrowseTag=function(a,b,c,d,e,f){this.fireflyAPI.token=a,d!=null?this.fireflyAPI.noCookies=!d:this.fireflyAPI.noCookies=!0,e!=null&&(this.fireflyAPI.timeout=e),f&&f!=""&&(this.fireflyAPI.environment=f),this.fireflyAPI.partner="247",this.fireflyAPI.cacheSettings={enabled:!0,theme:"black",whitelabel:!0,message:"Waiting for your support representative.",initiation_type:"api",force:!0};var g=document.createElement("script");g.type="text/javascript",g.src=b,c!=null?g.async=c:g.async=!0;var h=document.getElementsByTagName("head")[0];h.appendChild(g)},CobrowseVendor.CoBrowse247API.prototype.addCobrowseTag=function(a,b,c,d,e,f){this.coBrowse247API.token=a,e||(e=6e5),this.coBrowse247API.sessionTimeout=e;var g=parent.document.createElement("script");g.type="text/javascript",g.src=b;var h=parent.document.getElementsByTagName("head")[0];h.appendChild(g)},CobrowseVendor.FireFlyAPI.prototype.startSession=function(a){apiObj=this,startSessionAsync(apiObj,a,10)},CobrowseVendor.CoBrowse247API.prototype.startSession=function(a){apiObject=this,start247SessionAsync(apiObject,a,15)},CobrowseVendor.FireFlyAPI.prototype.endSession=function(){typeof this.fireflyAPI.endSession=="function"&&this.fireflyAPI.endSession()},CobrowseVendor.CoBrowse247API.prototype.endSession=function(){parent.disconnect(),this.eventListeners[CobrowseVendor.Events.COBROWSE_ENDED]()},CobrowseVendor.FireFlyAPI.prototype.registerCallbackHandler=function(a,b){this.eventListeners[a]=b},CobrowseVendor.CoBrowse247API.prototype.registerCallbackHandler=function(a,b){this.eventListeners[a]=b},CobrowseVendor.FireFlyAPI.prototype.continueSession=function(a){fireflyAPIObj=this.fireflyAPI,continueSessionAsync(fireflyAPIObj,a,10)},CobrowseVendor.CoBrowse247API.prototype.continueSession=function(a){continue247SessionAsync(this,a,15)},CobrowseVendor.FireFlyAPI.prototype.participantLeft=function(){var a=this.eventListeners[CobrowseVendor.Events.COBROWSE_PARTICIPANT_LEFT];a()},CobrowseVendor.CoBrowse247API.prototype.participantLeft=function(){var a=this.eventListeners[CobrowseVendor.Events.COBROWSE_PARTICIPANT_LEFT];a()},typeof SN=="undefined"&&(SN={}),function(){if(!localStorage.debug247)return;try{var a=JSON.parse(localStorage.debug247);for(var b in a)a.hasOwnProperty(b)&&(SN.Conf[b]=a[b])}catch(c){console&&console.log&&console.log("Debug Error: "+c)}}(),SN.CallBackToCustom=function(){function a(){parent.SN.UserAgentParser.getBrowserType()=="s"&&SN.Conf.setStoresToCookie()}function b(a){}function c(a){}return{onSNIframeToBeCreated:a,onEnvironmentNotSupported:b,onTfsDataPush:c}}(),SN.CustomScript=function(){function customInitialization(){var a=window.documentDomain;a&&a!=document.domain&&(document.domain=a),utils.setPollerStartToAuto(SN.Conf.startRunPollAuto),utils.setCrossDomainSupported(!0),utils.setPSPServerName(SN.Conf.CONST_PSP_ROOT),utils.setPSPCDNServerName(SN.Conf.CONST_PSP_CDN_ROOT),utils.setClientKey(SN.Conf.CONST_PSP_KEY),utils.setProxyServer(SN.Conf.PROXY_SERVER),utils.setCustomTrackServer(SN.Conf.CUSTOM_TRACK_SERVER),utils.setCustomTrackingLevel(LOGLVL_ERROR),utils.setPsdxdPath(SN.Conf.pspxdPath);var b=SN.Conf.customStoresAndLifeTimesToBeRegistered;for(var c in b)b.hasOwnProperty(c)&&utils.setStoreLifetime(c,b[c]);webpageFilter.setFilterType(filterType),webpageFilter.setInfilters(includeFilterMap),webpageFilter.setOutfilters(excludeFilterMap),webpageFilter.setInfilterRegexList(includeFilterRegexList),webpageFilter.setOutfilterRegexList(excludeFilterRegexList),utils.isDomready()?setupExitHistory():iframeContentWindow.SN.EventManager.observe(SN_CONSTANTS.DOMLOADED,setupExitHistory),iframeContentWindow.SN.EventManager.fire(SN_CONSTANTS.CUSTOM_INITIALIZATION_COMPLETED,{eventId:SN_CONSTANTS.CUSTOM_INITIALIZATION_COMPLETED}),pspCustomTrackingUtil.setTrackingVariableMap(SN.Conf.varmap),pspCustomTrackingUtil.startPoller(SN.Conf.pollingTime,SN.Conf.varMapFlag,SN.Conf.trackingUrlFlag)}function setupExitHistory(){var a=getElements();iframeContentWindow.SN.ExitHistory.registerElementsForExitLinkCapturing(a)}function getElements(){var a=[];return a[0]=parent.document.getElementById("yahoo"),a[1]=parent.document.getElementById("google"),a[1]=parent.document.getElementById("247inc"),a[1]=parent.document.getElementById("247inc-https"),a[1]=parent.document.getElementById("google-search"),a[1]=parent.document.getElementById("google-home"),a}function renderInitcall(a){var b={eventId:"initialize",data:{psproot:"http://psp.247ilabs.com/psp",pspkey:SN.Conf.CONST_PSP_KEY,v:"default",pageid:"getPageIdExpression()",trackid:"getWebTrackIdExpression()",ps_timeout_mins:"0",conversionTrackingIdIS:"",wowpxAppConfigs:{},widgetconfigs:{},mappedrulevariables:[{key:"TEMPLATE_NB_MODEL",scope:"r"},{key:"mv_browserDetails",scope:"r"},{key:"mv_chatInProgress",scope:"r"},{key:"mv_countInviteInSession",scope:"r"},{key:"mv_countInviteOnPage",scope:"r"},{key:"mv_deviceDetails",scope:"r"},{key:"mv_safariSuppression",scope:"r"},{key:"mv_isIPblocked",scope:"r"},{key:"mv_tsliSuppression",scope:"r"},{key:"mv_checkoutStaticSuppression",scope:"r"},{key:"mv_geo_ip",scope:"r"},{key:"mv_initialReferrer",scope:"r"},{key:"mv_inv_shown",scope:"r"},{key:"mv_isButtonActive",scope:"r"},{key:"mv_isInviteActive",scope:"r"},{key:"mv_inviteDeclined",scope:"r"},{key:"mv_lp_url",scope:"r"},{key:"mv_numberOfPagesVisited",scope:"r"},{key:"mv_proactiveInviteTimediff",scope:"r"},{key:"mv_rp_referrer",scope:"r"},{key:"mv_rs_referrer",scope:"r"},{key:"mv_suppressionTitles",scope:"r"},{key:"mv_suppressionUrls",scope:"r"},{key:"mv_device",scope:"r"},{key:"mv_timeOnSite",scope:"r"},{key:"mv_tp_title",scope:"r"},{key:"mv_ts_title",scope:"r"},{key:"mv_up_url",scope:"r"},{key:"mv_us_url",scope:"r"}]}};iframeContentWindow.SN.EventManager.fire("pageevent",b)}function macSafariSuppression(){var a=parent.SN.UserAgentParser.getOSType();return parent.SN.UserAgentParser.isBrowser("Version")&&a.search(/MacOS/i)!=-1&&getSessionInviteCount()>0?0:1}function checkoutAndURLSuppression(){return $undefinedOrNull(divIdObj.queue)||divIdObj.queue=="bestbuy-queue-cart"||divIdObj.id=="px-scheduler"||divIdObj.id=="px-recon"||divIdObj.id=="px-button-chat"||divIdObj.id=="px-email"?0:1}function isIPBlocked(){return parent.SN.VisitorFiltering.getIPFlagInDatastore()==="1"?"1":"0"}function isCheckoutSuppressionPage(){return getCurrentURL().search(/pcat17010/i)!=-1?(caPCCount=5,!0):!1}function TSLIsuppression(){var a=getTSLI();return-1==a?1:isProductQueue()&&a>=240||isMobileQueue()&&a>=360?1:0}function setLI(){var a=(new Date).getTime();updateCtCookie("li",a.toString())}function getTSLI(){var a=(new Date).getTime(),b=getValueFromCTCookie("li");return!$undefinedOrNull(b)&&b!=""&&b!="0"?(b=parseInt(b),tsli=Math.floor((a-b)/1e3)):tsli=-1,tsli}function isProductQueue(){var a=getByPageDivId("queue");return a=="bestbuy-queue-computing"||a=="bestbuy-queue-tablets-ereaders"||a=="bestbuy-queue-home-theater"||a=="bestbuy-queue-appliances"||a=="bestbuy-queue-pe-entertainment"?!0:!1}function isMobileQueue(){var a=getByPageDivId("queue");return a=="bestbuy-queue-mobile-3"?1:0}function getCurrentURL(){return parent.document.location.href||""}function updateCtCookie(a,b){storeManager.setValueInStore("sn.ct",a,b),b=storeManager.getValueFromStore("sn.ct"),crossXDataHandler.setLocalStorageItem("sn.ct",b,36e5,function(){})}function updateASStore(a,b){storeManager.setSessionData(a,b)}function stringifyCookieObj(a){var b="";for(var c in a)a.hasOwnProperty(c)&&!$undefinedOrNull(a[c])&&typeof a[c]!="object"?b=b+c+"~"+iframeContentWindow.SN.Base64Encoder.encode(a[c]):b=b+c+"~"+iframeContentWindow.SN.Base64Encoder.encode(stringifyCookieObj(a[c])),b+="|";return b.charAt(b.length-1)=="|"&&(b=b.substr(0,b.length-1)),b}function captureConversions(){var a=location.host.indexOf("espanol")==0?"espanol":"english";if(!$undefinedOrNull(this.callOnceCaptureConversions)&&this.callOnceCaptureConversions==1)return;var b={};b.f={},b.f.u={},b.f.o={},b.f.a={},b.f.p={},b.f.v={},b.ed={},b.st=(new Date).getTime();var c=parent.jQuery;if(c){if(location.host=="business.geeksquad.com"||location.host=="www.bestbuybusiness.com"||location.host=="bbfb-vip-pl1-ext.bestbuy.com"||location.host=="epro-pl.bestbuybusiness.com"){if(!$undefinedOrNull(c(".checkout-title"))&&c(".checkout-title").text()==="Thank You"){var d="",e="";!$undefinedOrNull(c(".column.third.no-top-margin"))&&c(".column.third.no-top-margin").length!==0&&(d=c(".column.third.no-top-margin a").text()),!$undefinedOrNull(c(".total-price"))&&c(".total-price").length!==0&&(e=parseFloat(decodeURIComponent(c(".total-price .val").text()).replace(/[^(\d)(\.)]/g,"")));if(d!==""&&e!==""){b.f.u.pi=parent.order_id||d||"",b.f.u.am=parent.rev||e||"",$undefinedOrNull($getData("svdclid"))||$getData("svdclid")===""||$undefinedOrNull($getData("svdq"))||$getData("svdq")===""?(b.f.o.ii=$getData("clid")||"",b.f.a.qu=$getData("queue")||divIdObj.queue||""):(b.f.o.ii=$getData("svdclid")||"",b.f.a.qu=$getData("svdq")||""),b.f.v.ri=$getData("ruleId")||"";var f=$getData("svdri")||"";f!=""&&!$undefinedOrNull(f)&&(b.f.v.ri=f),b.f.v.rc="b";var g=$getData("conversionEvent")||"";g!=b.f.u.pi&&localStorage.getItem("previousOrder")!=b.f.u.pi&&(b.stnt="",b.tnt="nemo-client-bestbuy",fireConversionEvent("11122",b),$setData("conversionEvent",b.f.u.pi),localStorage.setItem("previousOrder",b.f.u.pi))}}return}if(a==="english"){var h=parent.window.track;if(h&&h.catName=="Checkout - Thank You"){isPurchased=!0,b.f.u.pi="",b.f.u.am="";var i=0;if(h.qtyList){var j=h.qtyList.split(",");for(var k=0;k<j.length;k++)i+=parseInt(j[k])}b.f.u.on=i,b.ed.intid=$getData("svdintid")||"";try{b.f.u.pi=h.orderId||"";var l=0,m=0;if(h.priceList){var n=h.priceList.split(",");for(var o=0;o<n.length;o++)m+=parseFloat(n[o]);var p=parseFloat(h.orderShipAmt)||0,q=parseFloat(h.orderTaxAmt)||0,r=parseFloat(h.orderDiscAmt)||0,s=parseFloat(h.orderGCAmt)||0;l=m+p+q-(r+s),l=parseFloat(l.toFixed(2))}b.f.u.am=l}catch(t){utils.info(t.message)}$undefinedOrNull($getData("svdclid"))||$getData("svdclid")===""||$undefinedOrNull($getData("svdq"))||$getData("svdq")===""?(b.f.o.ii=$getData("clid")||"",b.f.a.qu=$getData("queue")||divIdObj.queue||""):(b.f.o.ii=$getData("svdclid")||"",b.f.a.qu=$getData("svdq")||divIdObj.queue||""),b.f.v.hl=1,b.f.v.of=$getData("invOf"),b.f.v.ri=$getData("ruleId")||"";var f=$getData("svdri")||"";f!=""&&!$undefinedOrNull(f)&&(b.f.v.ri=f),b.f.v.rc=iframeContentWindow.SN.CustomScript.getInviteTypeFromRuleId(b.f.v.ri),b.f.o.id="BBY_APP01_01",b.f.p.cp=parent.document.location.href,b.f.u.au=parent.guestUser!="undefined"&&parent.guestUser=="false"?"signedin":"guest",window.track.user_recognized=="Guest"?b.f.u.ct="guest":window.track.user_recognized=="Registered"&&(b.f.u.ct="signedin"),b.f.u.c29=h.skuList?h.skuList.split(",").join("|"):"",b.f.u.c30=c?c(h.products)?c(h.products).map(function(){return this.meta.shortLabel}).toArray().join("|"):"":"";var g=$getData("conversionEvent")||"";g!=b.f.u.pi&&localStorage.getItem("previousOrder")!=b.f.u.pi&&(b.f.o.ic=getSessionInviteCount(),b.stnt="",b.tnt="nemo-client-bestbuy",fireConversionEvent("11122",b),this.callOnceCaptureConversions=!0,$setData("conversionEvent",b.f.u.pi),localStorage.setItem("previousOrder",b.f.u.pi))}}}}function fireStateChangeEvent(a){var b={eventId:400103,fireImmediately:!0,data:{f:iframeContentWindow.SN.ConfigurationManager.getTrackableFSMVariables(100001)}};typeof b.data.f.c=="undefined"&&(b.data.f.c={}),b.data.f.c.catName=a.catName||"",b.data.f.c.parentCatName=a.parentCatName||"",b.data.f.c.uberCatName=a.uberCatName||"",b.data.f.c.catId=a.catId||"",eventManager.fire("WOWPXAPP_EVENT",b);var c=parent.window.track;c&&c.catName=="Checkout - Thank You"&&iframeContentWindow.SN.CustomScript.captureConversions()}function fireSchedulerStateChangeEvent(){var a=parent.window.track;if(a&&a.catName=="Thank"){if(!$undefinedOrNull(this.callOnceConfirmationCode)&&this.callOnceConfirmationCode==1)return;var b={};b.f={},b.f.u={},b.f.o={},b.f.a={},b.f.p={},b.f.v={},b.ed={},b.st=(new Date).getTime(),b.ed.intid=$getData("svdintid")||"",b.f.u.pi=a.confirmation||"",b.f.u.am="",b.f.u.on="",$undefinedOrNull($getData("svdclid"))||$getData("svdclid")===""||$undefinedOrNull($getData("svdq"))||$getData("svdq")===""?(b.f.o.ii=$getData("clid")||"",b.f.a.qu=$getData("queue")||""):(b.f.o.ii=$getData("svdclid")||"",b.f.a.qu=$getData("svdq")||""),b.f.v.hl=1,b.f.v.of=$getData("invOf")||"",b.f.v.ri=$getData("ruleId")||"";var c=$getData("svdri")||"";c!=""&&!$undefinedOrNull(c)&&(b.f.v.ri=c),b.f.v.rc=SN.CustomScript.getInviteTypeFromRuleId(b.f.v.ri),b.f.o.id="BBY_APP01_01",b.f.p.cp=parent.document.location.href,b.f.u.au=parent.guestUser!="undefined"&&parent.guestUser=="false"?"signedin":"guest",window.track.user_recognized=="Guest"?b.f.u.ct="guest":window.track.user_recognized=="Registered"&&(b.f.u.ct="signedin"),b.f.u.c29="",b.f.u.c30="";var d=$getData("conversionEvent")||"";d!=b.f.u.pi&&localStorage.getItem("previousOrder")!=b.f.u.pi&&(b.f.o.ic=getSessionInviteCount(),b.stnt="",b.tnt="nemo-client-bestbuy",fireConversionEvent("11122",b),this.callOnceConfirmationCode=!0,$setData("conversionEvent",b.f.u.pi),localStorage.setItem("previousOrder",b.f.u.pi))}}function fireConversionEvent(a,b){var c={},d=iframeContentWindow.SN.ConfigurationManager;c.key=d.getPSPKey(),b.ec=a,parent.SN.Tracker.constructAndMakeTrackingCall(c,b)}function getEncodedValue(a){return a}function getDecodedValue(a){return a}function isOfficeTime(){return!0}function stateChange(){}function decline(){}function minimize(){}function ignore(){}function shown(){}function accept(a,b,c,d,e){SN.CustomInviteManager.resetDockButton(),$setData("ruleId",b),fireInviteEvent("11104",b,"InviteAccepted",c),$setData("clid",c),launchChat(b,c)}function overrideCfConfig(a,b){return b}function inviteConfig(){var a=SN.Conf,b=SN.UserAgentParser,c=a.CDN_DOMAIN+a.CONST_PSP_KEY+"/"+a.CONST_PSP_VERSION+"/"+a.CONST_CDN_VERSION+"/apps/";return{appId:"BESTBUY_APP01_01",pageType:function(){return parent&&parent.s&&parent.s.pageName&&typeof parent.s.pageName=="string"?parent.s.pageName:""},dcfType:"__inPage__",snHtmlPath:"/psp247/247SN.html",buttonManager:{defaultConfig:{containerQuery:undefined,queue:undefined,excludeEnableAll:!1,enabledOnDevices:"DTM",replaceContainer:!1,altMessage:{available:"Click to chat",busy:"Our agents are busy at the moment",offline:"Our agents are offline right now",chatting:"Chat is going on, please switch to chat window",loading:"Checking status"},actions:{accept:accept,shown:shown,isOfficeTime:isOfficeTime,stateChange:stateChange},styles:{container:{},button:{border:"none",backgroundColor:"transparent",outline:"none",fontSize:"0px",textIndent:"-9999px"},available:{cursor:"pointer"},loading:{cursor:"default"},busy:{cursor:"default"},offline:{cursor:"default"},chatting:{cursor:"default"}}},buttonList:{mvp_button:{containerQuery:"body",queue:a.CONST_ASSIST_DEFQUEUE,altMessage:{available:"Click me",busy:"Offline",offline:"Offline",chatting:"Offline",loading:"Offline"},styles:{container:{},button:{position:"fixed",bottom:"__desktopBtnLocBottom__",right:"__desktopBtnLocRight__",width:"__desktopBtnWidth__",height:"__desktopBtnHeight__",backgroundImage:"url('//"+c+"invite/img/button.png')",border:"none",backgroundColor:"transparent",outline:"none",fontSize:"0px",textIndent:"-9999px",zIndex:"999999"},available:{display:"block",backgroundPosition:"0 0px",cursor:"pointer"},loading:{display:"none",backgroundPosition:"0 0px",cursor:"default"},busy:{display:"none",backgroundPosition:"0 0px",cursor:"default"},offline:{display:"none",backgroundPosition:"0 0px",cursor:"default"},chatting:{display:"none",backgroundPosition:"0 0px",cursor:"default"}}}}},proactiveManager:{defaultConfig:{queue:undefined,ignoreTimeout:undefined,afterMinimize:undefined,isDraggable:!0,htmls:undefined,altMessage:{accept:"Click to chat",decline:"No, ask me later",minimize:"Dock the invite"},actions:{shown:shown,accept:accept,decline:decline,minimize:minimize,ignore:ignore},styles:{container:{position:"fixed",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none"},content:{},controls:{position:"absolute",top:"0px",cursor:"move"},accept:{position:"absolute",backgroundColor:"transparent",cursor:"pointer",border:"none",outline:"none",fontSize:"0px",textIndent:"-9999px"},decline:{position:"absolute",backgroundColor:"transparent",cursor:"pointer",border:"none",outline:"none",fontSize:"0px",textIndent:"-9999px"},minimize:{position:"absolute",backgroundColor:"transparent",cursor:"pointer",border:"none",outline:"none",fontSize:"0px",textIndent:"-9999px"}}},proactiveList:{mvp_proactive:{queue:a.CONST_ASSIST_DEFQUEUE,ignoreTimeout:30,altMessage:{accept:"Click to chat",decline:"No, ask me later",minimize:"Dock the invite"},styles:{container:{position:"fixed",top:"__proLocTop__",right:"__proLocRight__",width:"__proWidth__",height:"__proHeight__",webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",userSelect:"none",zIndex:"999999"},content:{backgroundImage:"url('//"+c+"invite/img/proactive.png')",width:"__proWidth__",height:"__proHeight__"},controls:{width:"__proWidth__",height:"__proHeight__",position:"absolute",top:"0px",cursor:"move"},accept:{position:"absolute",width:"__proAccWidth__",height:"__proAccHeight__",backgroundColor:"transparent",left:"__proAccLocLeft__",top:"__proAccLocTop__",cursor:"pointer",border:"none",outline:"none",fontSize:"0px",textIndent:"-9999px"},decline:{position:"absolute",width:"__proDecWidth__",height:"__proDecHeight__",backgroundColor:"transparent",top:"__proDecLocTop__",left:"__proDecLocLeft__",cursor:"pointer",border:"none",outline:"none",fontSize:"0px",textIndent:"-9999px"},minimize:{position:"absolute",width:"0px",height:"0px",backgroundColor:"transparent",top:"0px",left:"0px",cursor:"pointer",border:"none",outline:"none",fontSize:"0px",textIndent:"-9999px"}}}}},assistConfig:{caserver:a.CONST_ASSIST_CA_ROOT,defqueue:a.CONST_ASSIST_DEFQUEUE,accountId:a.CONST_ASSIST_ACCOUNT_ID,vsserver:a.CONST_ASSIST_VS_ROOT,overrideQueue:a.DEBUG_QUEUE,overrideResponse:a.DEBUG_RESPONSE},prechatContext:{vi:"SN.SessionManager.getGlobalSession().getVisitorId()",asid:"$activeSessionId()",bsid:"SN.SessionManager.getGlobalSession().getVisitorId()+'-'+$activeSessionId()",tpid:"SN.SessionManager.getGlobalSession().getTargetPopulationId()",vg:"SN.SessionManager.getGlobalSession().getVisitorGroup()",appid:"SN.WOWPx.Helpers.getAppId()",psid:"",url:"parent.document.location.href.slice(0,100)",invitePage:"SN.Tracker.getUniquePageId()",sc:"",rc:"",chatType:"",btnName:"",pcs:"$getTotalVisitCount()",ip:"$geoIPAddress()",city:"$geoCity()",country:"$geoCountry()",org:"$geoOrganization()",worldRegion:"$geoRegion()",postCode:"$geoPostalCode()",isp:"$geoIsp()",btnTyp:""}}}function setDefaultQueue(){var a=SN.Conf;if(a.CONST_ASSIST_DEFQUEUE)return;SN.UserAgentParser.getDeviceType()!=="D"?a.CONST_ASSIST_DEFQUEUE="":a.CONST_ASSIST_DEFQUEUE=""}function processCustomerSurveyData(a){function b(a){return a<10?"0"+a:""+a}try{var c,d;if(a.data&&a.data.f&&a.data.f.o&&a.data.f.o.fd){c=JSON.parse(a.data.f.o.fd);for(var e in c)if(c.hasOwnProperty(e)){if(/_free_text/.test(e))continue;d=parseInt(c[e],10),isNaN(d)||(c[e]="a_s"+b(d))}a.data.f.o.fd=JSON.stringify(c)}}catch(f){SN.Utils.error("Error in Customer Survey ->"+f)}}function trackDesktop(a){typeof a.eventId=="number"&&(a.eventId=a.eventId.toString());switch(a.eventId){case"10001":a.eventId="10010";break;case"10011":processCustomerSurveyData(a);break;case"10012":a.data.f.o.ft="offline form";break;case"10004":agentName=a.data.f.a.cs;break;case"10006":a.data.f.a.cs=agentName;break;case"400101":a.eventId="10010",a.data.f.o.ft="slider";break;case"400102":case"400103":case"400104":case"705000":case"705001":case"705002":case"705003":case"705004":case"705005":case"705006":case"705007":case"705008":case"705009":case"705010":case"705011":case"705012":case"705015":case"705016":case"705017":case"705018":return;default:}return a}function track(a,b){var c;a=="desktop"&&(c=trackDesktop(b)),c&&iframeContentWindow.SN.EventManager.fire("WOWPXAPP_EVENT",c)}function Initialize_ChatFramework(){iframeContentWindow.SN.Executer.registerPlatformChecks(utils.isCFReady);var a=inviteConfig();iframeContentWindow.SN.WOWPx.InitInvite.init(a)}function customInviteConfig(){var a={tpid:"3",buttonclid:"",ruleId:divIdObj.ruleid,defqueue:divIdObj.queue,divId:divIdObj.id,avqueue:"e93b0e25-ae60-48e3-9e1a-26e5cda49c9d",accountId:"bestbuy-account-1",server:SN.Conf.CONST_ASSIST_VS_ROOT,caserver:SN.Conf.CONST_ASSIST_CA_ROOT,observePollEvent:"periodicexecutionevent"},b=getChatConfigFromCookie();return b&&(a.avqueue=b.avqueue,a.accountId=b.accountId,a.server=b.server,a.caserver=b.caserver),a}function Initialize_CustomChatFramework(){var a=customInviteConfig();SN.CustomInviteManager.initInvite(a)}function triggerInvite(){var a=customInviteConfig();a.ruleId="invite",SN.CustomInviteManager.initInvite(a),SN.CustomAvailabilityDecider.checkAvailability({cb:SN.CustomInviteManager.checkAvailability,id:"proactive",type:SN.CustomAvailabilityDecider.TYPE.ONLY_ONCE})}function randomUUID(){var a=[],b="0123456789ABCDEF";for(var c=0;c<36;c++)a[c]=Math.floor(Math.random()*16);a[14]=4,a[19]=a[19]&3|8;for(var c=0;c<36;c++)a[c]=b.charAt(a[c]);return a[8]=a[13]=a[18]=a[23]="-",a.join("").toLowerCase()}function getInviteTypeFromRuleId(a){var b="";if(a==null||a==undefined||typeof a=="undefined")a="";return a.indexOf("_DOCK")>-1?b="b":a.indexOf("BBY_PR_")>-1||a.indexOf("proactive")>-1?b="p":b="b",b}function fireInviteEvent(a,b,c,d){var d=d;$undefinedOrNull(b)&&(b="rule_is_undef"),$undefinedOrNull(d)&&(d="clid_is_undef");var e=getInviteTypeFromRuleId(b);eventManager.fire("WOWPXAPP_EVENT",{eventId:a,fireImmediately:!0,data:{ed:{eventName:c,appid:"BESTBUY_APP01_01"},f:{v:{ri:b,rn:b,rc:e,ip:iframeContentWindow.$geoIPAddress(),ct:iframeContentWindow.$geoCity(),co:iframeContentWindow.$geoCountry(),org:iframeContentWindow.$geoOrganization(),wr:iframeContentWindow.$geoRegion(),zip:iframeContentWindow.$geoPostalCode(),isp:iframeContentWindow.$geoIsp(),pcs:iframeContentWindow.$getTotalVisitCount()},o:{ii:d,id:"BESTBUY_APP01_01",it:e,ic:getSessionInviteCount(),at:"chat"},a:{qu:divIdObj.queue},p:{cp:parent.document.location.href}}}})}function getSessionInviteCount(){var a=getValueFromASStore("cSessInvite");if(a==""||$undefinedOrNull(a))a="0";return parseInt(a,10)}function getValueFromASStore(a){var b=storeManager.getValueFromStore(SN_CONSTANTS.SN_AS_STORE_NAME,a)||"";return b}function getValueFromCTCookie(a){var b=storeManager.getValueFromStore("sn.ct",a)||"";return b}function objectifyCookie(a){var b=a.match(/[^|]+/g),c={};for(var d in b)if(String(Number(d))===d&&b.hasOwnProperty(d)){var e=b[d].match(/[^~]+/g);!$undefinedOrNull(e[1])&&e[1]!=""?c[e[0]]=iframeContentWindow.SN.Base64Encoder.decode(e[1]):iframeContentWindow.SN.Utils.info("SN: ignoring blank or null values for sn.cfv cookie")}return c}function checkTime(a){return a<10&&(a="0"+a),a}function currentTimeInCST(){var a=new Date,b=new Date(a.getFullYear(),0,1),c=new Date(a.getFullYear(),6,1),d=Math.max(b.getTimezoneOffset(),c.getTimezoneOffset()),e=-216e5;a.getTimezoneOffset()<d&&(e=-18e6);var f=iframeContentWindow.SN.ConfigurationManager.getServerTimeStamp()+e;return f}function isOutOfOffice(){var a=new Date,b=a.getTime()+a.getTimezoneOffset()*6e4,c=new Date(iframeContentWindow.SN.ConfigurationManager.getServerTimeStamp()),d=new Date(currentTimeInCST()),e=d.getDay(),f=parseFloat(checkTime(d.getUTCHours())+""+checkTime(d.getUTCMinutes()));return divIdObj.id=="px-scheduler"||divIdObj.id=="px-services"||divIdObj.id=="px-mobile-misc"||divIdObj.id=="px-mobile-help"?f>=800&&f<=2200?!1:!0:divIdObj.id=="px-recon"?e==0||e==6?!0:f>=830&&f<=1700?!1:!0:divIdObj.id=="px-appliances"||divIdObj.id=="px-home-theater"?f>100&&f<700?!0:!1:divIdObj.id=="px-email"?e==0||e==6?!0:f>=700&&f<=2300?!1:!0:f>100&&f<700?!0:!1}function directChat(){var a="directchatgschatappjs",b="directchatgschatapp.gz.js";parent.location.href.indexOf("id=scheduler")>0?(a="directchatschedulerchatappjs",b="directchatschedulerchatapp.gz.js"):parent.location.href.indexOf("id=trainingApp")>0&&(a="directchattrainingchatappjs",b="directchattrainingchatapp.gz.js",inviteOfferedFlag=!1),appid="BBY_APP02_01";var c="directchat";clids.btnclid=randomUUID(),$setData("clid",clids.btnclid),parent.location.href.indexOf("id=trainingApp")==-1&&(fireInviteEvent("11103",c,"InviteOffered",clids.btnclid),inviteOfferedFlag=!1,fireInviteEvent("11104",c,"InviteAccepted",clids.btnclid)),$setData("ruleId",c),window.name=getContextData(c,clids.btnclid);var d=parent.document.createElement("script");d.id=a,d.src="//"+SN.Conf.CDN_DOMAIN+SN.Conf.CONST_PSP_KEY+"/"+SN.Conf.CONST_PSP_VERSION+"/"+SN.Conf.CONST_CDN_VERSION+"/"+b,parent.document.getElementsByTagName("head")[0].appendChild(d)}function Initialize_ADP(){iframeContentWindow.SN.ADP.VEA.Initialize({chatUtilUrl:"//d1af033869koo7.cloudfront.net/dcf/v1/chat-util.min.js"})}function isBlueAssistChat(){return parent.window.enableBlueAssistTab&&parent.window.enableBlueAssistTab==1?!0:!1}function isMobileCustomButtonEnabled(){return parent.window.enableBlueAssistTab_mobile&&parent.window.enableBlueAssistTab_mobile==1?!0:!1}function initializeMobileChat(){var a=parent.window.chatNowCategory||"",b=parent.window.EventManager,c=divIdObj.queue;$setData("divId",a),appid="BBY_APP01_01",$setData("queue",c),clids.btnclid=randomUUID(),$setData("clid",clids.btnclid),checkAvailabilityFlag=!1,$setData("ruleId",divIdObj.ruleid);if(SN.Conf.isCG()||isIPBlocked()=="1"){parent.window.EventManager.trigger("ChatAssist-IsAvailable",0);return}isMobileCustomButtonEnabled()&&fireInviteEvent("11103",divIdObj.ruleid,"InviteOffered",clids.btnclid);var d=customInviteConfig();d.cb=SN.CustomInviteManager.mobileChatAssistCACallback,SN.CustomInviteManager.initInvite(d);var e=!0;if(e){var f=0,g=window.setInterval(function(){if(f<8){f++;var a=customInviteConfig();a.cb=SN.CustomInviteManager.mobileChatAssistCACallback,SN.CustomInviteManager.initInvite(a),SN.CustomAvailabilityDecider.checkAvailability({cb:SN.CustomInviteManager.mobileChatAssistCACallback,id:"mobileChatAssist",type:SN.CustomAvailabilityDecider.TYPE.ONLY_ONCE})}else window.clearInterval(g)},1e4);e=!1}b.on("ChatAssist-ChatNowClicked",blueAssistChatNowClickCallback)}function quickHideAddressBar(){setTimeout(function(){if(window.pageYOffset!==0)return;window.scrollTo(0,window.pageYOffset+1)},1e3)}function initializeBlueAssistChat(){var a=parent.window.chatNowCategory||"",b=parent.window.EventManager,c=divIdObj.queue;$setData("divId",a),appid="BBY_APP01_01",$setData("queue",c),clids.btnclid=randomUUID(),$setData("clid",clids.btnclid),checkAvailabilityFlag=!1,$setData("ruleId",divIdObj.ruleid);if(SN.Conf.isCG()||isIPBlocked()=="1")parent.window.EventManager.trigger("BlueAssist-IsAvailable",!1);else{var d=customInviteConfig();d.cb=SN.CustomInviteManager.blueAssistCACallback,SN.CustomInviteManager.initInvite(d)}b.on("Questions-button-click",blueAssistQuestionClickCallback),b.on("BlueAssist-ChatNowClicked",blueAssistChatNowClickCallback)}function blueAssistQuestionClickCallback(){if(SN.Conf.isCG()||isIPBlocked()=="1"){parent.window.EventManager.trigger("BlueAssist-IsAvailable",!1);return}var a=parent.window.chatNowCategory||"";$setData("divId",a);var b=divIdObj.ruleid||"";baInviteOfferedFlag&&(fireInviteEvent("11103",b,"InviteOffered",clids.btnclid),baInviteOfferedFlag=!1);if(qstnTabCAFlag){var c=0,d=window.setInterval(function(){if(c<8){c++;var a=customInviteConfig();a.cb=SN.CustomInviteManager.blueAssistCACallback,SN.CustomInviteManager.initInvite(a),SN.CustomAvailabilityDecider.checkAvailability({cb:SN.CustomInviteManager.blueAssistCACallback,id:"blueAssist",type:SN.CustomAvailabilityDecider.TYPE.ONLY_ONCE})}else window.clearInterval(d)},1e4);qstnTabCAFlag=!1}}function getChatWindowRef(){try{var a=parent.document.getElementById("mvp_directchat_iframe");if(a==="undefined"||a===null)a=window;return a.contentWindow}catch(b){}}function blueAssistChatNowClickCallback(){if(SN.Conf.isCG()||isIPBlocked()=="1")return;var divIds=parent.window.chatNowCategory||"",ruleId=divIdObj.ruleid||"";if(isMobile()){try{var mobileChatref=getChatWindowRef();mobileChatref.document.getElementById("minimized_btn")&&mobileChatref.document.getElementById("minimized_btn").click()}catch(e){}iframeContentWindow.SN.WOWPx.UI.MobileChatManager.directChat("mvp_directchat",ruleId,iframeContentWindow.SN.Utils.randomUUID(),divIdObj.queue,"b"),isChattingSession()!=1&&fireInviteEvent("11104",ruleId,"InviteAccepted",clids.btnclid);if(divIds&&isChattingSession()!=1)var bbyEvent=eval(bbyEvents[divIds])}else{getTfsonChat()!=1&&fireInviteEvent("11104",ruleId,"InviteAccepted",clids.btnclid),launchChat(ruleId,clids.btnclid);if(divIds&&getTfsonChat()!=1)var bbyEvent=eval(bbyEvents[divIds])}}function isBlueAssistEnabled(){if(isBlueAssistChat())return"np";var a=["px-computing","px-tablets-ereaders","px-home-theater","px-appliances","px-pe-entertainment","px-mobile-help","px-span-chat-now","px-chat-online","px-mobile-misc","px-span-checkout5-chat-now","px-span-checkout6-chat-now"];for(var b=0,c=a.length;b<c;b++)if(parent.document.getElementById(a[b]))return"op";return"oc"}function getChatConfigFromCookie(){try{var a=SN.CookieManager.readSNCookie("sn.chat.config"),b;if(!!$undefinedOrNull(a))return null;b=JSON.parse(a);if(typeof b=="object"&&!$undefinedOrNull(b.queue)&&!$undefinedOrNull(b.avqueue)&&!$undefinedOrNull(b.accountId)&&!$undefinedOrNull(b.server)&&!$undefinedOrNull(b.caserver)&&b["queue"]!=""&&b["avqueue"]!=""&&b["accountId"]!=""&&b["server"]!=""&&b["caserver"]!="")return b}catch(c){return utils.info("Error while trying to read sn.chat.config : "+c),null}}function isGeekSquadPage(){return parent.window.track&&parent.window.track.pageType=="geekSquad,gsod"}function getByPageDivId(a){function h(b){switch(a){case"id":return b.id;case"queue":return b.queue;case"pageid":return b.pageid;case"ruleid":return b.ruleid;default:return b}}var b,c;if(divIdObj&&divIdObj.queue){c=h(divIdObj);if(c)return c}if(isGeekSquadPage()){b={id:"px-recon",queue:"bestbuy-recon",pageid:"bestbuyRecon",ruleid:"BBY_Recon"},c=h(b);if(c)return c}var d=[{id:"px-span-chat-now",queue:"bestbuy-queue-mobile-3",pageid:"bestbuySpanChatNow",ruleid:"BBY_DOCK_MPQ"},{id:"px-mobile-misc",queue:"bestbuy-queue-mobile-3",pageid:"bestbuyMobileMisc",ruleid:"BBY_DOCK_MPQ"},{id:"px-span-checkout1-chat-now",queue:"bestbuy-queue-cart",pageid:"bestbuyCheckout1ChatNow",ruleid:"BBY_DOCK_CCQ"},{id:"px-span-checkout2-chat-now",queue:"bestbuy-queue-cart",pageid:"bestbuyCheckout2ChatNow",ruleid:"BBY_DOCK_CCQ"},{id:"px-chat-online",queue:"bestbuy-queue-mobile-3",pageid:"bestbuyChatOnline",ruleid:"BBY_DOCK_MPQ"},{id:"px-span-checkout4-chat-now",queue:"bestbuy-queue-cart",pageid:"bestbuyCheckout4ChatNow",ruleid:"BBY_DOCK_CCQ"},{id:"px-span-checkout3-chat-now",queue:"bestbuy-queue-cart",pageid:"bestbuyCheckout3ChatNow",ruleid:"BBY_DOCK_CCQ"},{id:"px-mobile-help",queue:"bestbuy-queue-mobile-3",pageid:"bestbuyMobileHelp",ruleid:"BBY_DOCK_MPQ"},{id:"px-span-checkout5-chat-now",queue:"bestbuy-queue-mobile-3",pageid:"bestbuyCheckout5ChatNow",ruleid:"BBY_DOCK_MPQ"},{id:"px-span-checkout6-chat-now",queue:"bestbuy-queue-mobile-3",pageid:"bestbuyCheckout6ChatNow",ruleid:"BBY_DOCK_MPQ"},{id:"px-service-page-chat",queue:"e93b0e25-ae60-48e3-9e1a-26e5cda49c9d",pageid:"bestbuyServicePageChat",ruleid:"ServicePageChat"},{id:"px-my-account",queue:"bestbuy-queue-my-account",pageid:"bestbuyMyAccount",ruleid:"MyAccount"},{id:"px-product-launch",queue:"bestbuy-queue-cart",pageid:"ProductLaunch",ruleid:"ProductLaunch"},{id:"px-appliance-1",queue:"bestbuy-queue-cart",pageid:"bestbuyAppliance1",ruleid:"Appliance1"},{id:"px-appliance-2",queue:"bestbuy-queue-cart",pageid:"bestbuyAppliance2",ruleid:"Appliance2"},{id:"px-computing",queue:"bestbuy-queue-computing",pageid:"bestbuyComputing",ruleid:"BBY_DOCK_Computing"},{id:"px-tablets-ereaders",queue:"bestbuy-queue-tablets-ereaders",pageid:"bestbuyTabletsEreaders",ruleid:"BBY_DOCK_TabletsEreaders"},{id:"px-home-theater",queue:"bestbuy-queue-home-theater",pageid:"bestbuyHomeTheater",ruleid:"BBY_DOCK_HomeTheater"},{id:"px-appliances",queue:"bestbuy-queue-appliances",paegid:"bestbuyAppliances",ruleid:"BBY_DOCK_Appliances"},{id:"px-pe-entertainment",queue:"bestbuy-queue-pe-entertainment",pageid:"bestbuyPeEntertainment",ruleid:"BBY_DOCK_PeEntertainment"},{id:"px-services",queue:"bestbuy-Service-Queue",pageid:"bestbuyServices",ruleid:"BBY_DOCK_Services"},{id:"px-gift",queue:"bestbuy-Gift-Queue",pageid:"bestbuyGift",ruleid:"BBY_Dock_Gift"},{id:"px-scheduler",queue:"bestbuy-Scheduler",pageid:"bestbuyScheduler",ruleid:"BBY_Scheduler"},{id:"px-recon",queue:"bestbuy-recon",pageid:"bestbuyRecon",ruleid:"BBY_Recon"},{id:"px-expertService",queue:"expertSerivice-queue",pageid:"bestbuyExpertService",ruleid:"BBY_ExpertService"},{id:"px-button-chat",queue:"bestbuy-BBFB-Sales-queue",pageid:"bbfb_tagged_page",ruleid:"BBFB_showchatbutton"},{id:"px-button-chat-gs",queue:"bestbuy-BBFB-Sales-queue",pageid:"bbfb_tagged_page_gs",ruleid:"BBFB_showchatbuttonGs"},{id:"px-email",queue:"bestbuy-support",pageid:"bestbuyEmail",ruleid:"BBY_DOCK_Email"}];if(isMobile())var d=[{id:"px-appliances",queue:"bestbuy-Mobile-Appliances",paegid:"",ruleid:"mobile-btn"},{id:"px-home-theater",queue:"bestbuy-Mobile-Home-Theater",pageid:"",ruleid:"mobile-btn"}];for(var e=0,f=d.length;e<f;e++)if(parent.document.getElementById(d[e].id)){d[e].id=="px-expertService"&&(d[e].queue=expertServiceClickHandler()||d[e].queue);var g=getChatConfigFromCookie();g&&(d[e].queue=g.queue),c=h(d[e]);if(c)return c}if(parent.location.href.indexOf("247chat.html#")>0&&parent.location.href.indexOf("r=directchat.gz.js")>0&&parent.location.href.indexOf("id=scheduler")>0){b={id:"directchat",queue:"bestbuy-Scheduler-queue",pageid:"directchat",ruleid:"directchat"},c=h(b);if(c)return c}else if(parent.location.href.indexOf("247chat.html#")>0&&parent.location.href.indexOf("r=directchat.gz.js")>0&&parent.location.href.indexOf("id=trainingApp")>0){b={id:"directchat",queue:"bestbuy-Training",pageid:"directchat",ruleid:"directchat"},c=h(b);if(c)return c}else if(parent.location.href.indexOf("247chat.html#")>0&&parent.location.href.indexOf("r=directchat.gz.js")>0){b={id:"directchat",queue:"bestbuy-Service-Queue",pageid:"directchat",ruleid:"directchat"},c=h(b);if(c)return c}return h({id:null,queue:null,pageid:null,ruleid:null})}function init(){try{var a=SN.CookieManager.readSNCookie("sn.rn");a&&a!="null"&&a!=""&&localStorage.setItem("sn.rn",a);var b=SN.CookieManager.readSNCookie("sn.loglvl");b&&b!="null"&&b!=""&&utils.setLogLevel(b)}catch(c){utils.info("Error while trying to set sn.rn : "+c)}setDefaultQueue(),utils.isXdStorageAvailable()?(isLocalStoreSupported=!0,onLocalStorageAvailable()):eventManager.observe(SN_CONSTANTS.XD_CHANNEL_READY_EVENT,function(a){isLocalStoreSupported=a.memo.isXdStorageAvailable||!1,isLocalStoreSupported?onLocalStorageAvailable():(utils.info("getTfsonChat : "+getTfsonChat()),getTfsonChat()==1&&startChatPoller())}),eventManager.observe(SN_CONSTANTS.PAGE_LOAD_EVENT_COMPLETE,onPageLoadCompleted),eventManager.observe(SN_CONSTANTS.SESSION_START_EVENT,function(){$setData("inviteDeclined","0")})}function getSessionData(a){return storeManager.getValueFromStore(SN_CONSTANTS.SN_AS_STORE_NAME,a)}function isChattingSession(){var a=getSessionData("cs")||"";return a!="windowClosed"&&a!=""?"1":"0"}function isBBYEvent(bbevnt){var divIds=divIdObj.id;bbevnt=="10006"?eval(bbyInteractiveChatEvents[divIds]):bbevnt=="10010"?eval(bbyFeedbackSubmitEvents[divIds]):bbevnt=="10004"&&eval(bbyChatConnectedEvents[divIds])}function getCookie(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1);if(e.indexOf(b)==0)return e.substring(b.length,e.length)}return""}function mobileSiteLoaded(){return mobilecookie=="s"}function isMobile(){var a=getCookie("bby_rdp");return a!=undefined&&a!=""&&a!=null&&(mobilecookie=a),mobilecookie=="s"&&SN.UserAgentParser.getDeviceType()=="M"?!0:!1}function initRecon(){reconInitialized?SN.CustomInviteManager.triggerButton():(Initialize_CustomChatFramework(),reconInitialized=!0)}function onPageLoadCompleted(){parent.SN.VisitorFiltering.getIPFlagInDatastore()==="0"&&divIdObj.queue!==null&&(isMobile()?(Initialize_ChatFramework(),initializeMobileChat()):isBlueAssistChat()?initializeBlueAssistChat():isGeekSquadPage()?(parent.window.EventManager.on("247:init",initRecon),document.getElementById("px-recon")&&initRecon()):Initialize_CustomChatFramework()),parent.SN.MetaLayer.bindStateChangeEvent(),initSessionInviteCount(),divIdObj["id"]=="px-expertService"&&expertServiceChat(),divIdObj["ruleid"]=="directchat"&&directChat(),cobrowse=SN.WOWPx.CustomCobrowse()}function onLocalStorageAvailable(){crossXDataHandler.getLocalStorageItem("sn.ct",function(a,b){utils.info("Updating sn.ct from third party");try{var c=b.split(SN_CONSTANTS.KEY_SEPERATOR);for(var d=0;d<c.length;d++){var e=c[d].split(SN_CONSTANTS.KEY_VALUE_SEPERATOR)[0],f=c[d].split(SN_CONSTANTS.KEY_VALUE_SEPERATOR)[1];!$undefinedOrNull(e)&&!$undefinedOrNull(f)&&f!=""&&storeManager.setValueInStore("sn.ct",e,f)}}catch(g){}utils.info("getTfsonChat : "+getTfsonChat()),getTfsonChat()==1&&startChatPoller()})}function cobrowsePoller(){try{cobrowse.isCobrowseTaggingRequired()}catch(a){utils.info("Cobrowse tagging error: "+a)}}function initSessionInviteCount(){var a=getValueFromASStore("cSessInvite");($undefinedOrNull(a)||a=="")&&updateASStore("cSessInvite","0")}function isInviteDeclined(){return parseInt($getData("inviteDeclined")||"0",10)}function incSessionInviteCount(){if(!storeManager.isActiveSessionPresent())updateASStore("cSessInvite","5");else{var a=getValueFromASStore("cSessInvite");if($undefinedOrNull(a)||a=="")a="0";updateASStore("cSessInvite",(parseInt(a)+1).toString())}}function cSessTotalInviteCount(){return storeManager.isActiveSessionPresent()?parseInt(getValueFromASStore("cSessInvite")||"0",10):3}function expertServiceChat(){if(parent.SN.VisitorFiltering.getIPFlagInDatastore()==="1")return;appid="BBY_APP01_01",ruleId="BBY_ExpertService",caPCCount=5,clids.btnclid=randomUUID(),$setData("clid",clids.btnclid),fireInviteEvent("11103",ruleId,"InviteOffered",clids.btnclid),inviteOfferedFlag=!1,checkAvailabilityFlag=!1,$setData("ruleId",ruleId)}function expertServiceClickHandler(){var a={tfsHeaderChat:"bestbuy-queue-cart",tfsOnlineAdvisor:"bestbuy-queue-cart",tfsTablets:"bestbuy-queue-tablets-ereaders",tfsHometheater:"bestbuy-queue-home-theater",tfsLaptops:"bestbuy-queue-computing",tfsCellPhones:"bestbuy-queue-mobile-3",tfsMajorAppliances:"bestbuy-queue-appliances",tfsDesktops:"bestbuy-queue-computing"};for(var b in a)if(a.hasOwnProperty(b)){var c=parent.document.getElementById(b);if(c)return c.addEventListener?c.addEventListener("click",function(a){launchExpertService(),cancelEvent(a)},!1):c.attachEvent("onclick",function(a){launchExpertService(),cancelEvent(a)}),a[b]}}function cancelEvent(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function launchExpertService(){getTfsonChat()!=1&&fireInviteEvent("11104",ruleId,"InviteAccepted",clids.btnclid),launchChat(ruleId,clids.btnclid);var bbyEvent=eval(bbyEvents["px-expertService"])}function startChatPoller(){utils.info("Starting chat poller"),chatPoller();var a=window.setInterval(function(){if(!$undefinedOrNull(chatWindowId)&&chatWindowId.closed==1||getTfsonChat()==0){utils.info("Chat ended. Resetting all flags");var b=["svdintid","svdclid","svdq","svdri","ds","hb"];for(var c=0;c<b.length;c++)storeManager.deleteValueFromStore("sn.ct",b[c]);storeManager.deleteValueFromStore("sn.ct"),crossXDataHandler.removeLocalStorageItem("sn.ct",function(){}),cobrowse&&cobrowse.getCobrowseStatus()!==null&&cobrowse.getCobrowseStatus()!=="ENDED"&&cobrowse.endCobrowseSession(),SN.CustomInviteManager.triggerButton(),window.clearInterval(a),baInviteOfferedFlag=!0,qstnTabCAFlag=!0}else chatPoller(),cobrowsePoller()},1e3)}function chatPoller(){var divIds=divIdObj.id,getDataStatus=storeManager.getValueFromStore("sn.ct","ds");if(getDataStatus=="prechat"&&!preChatEventFired){preChatEventFired=!0,utils.info("Firing prechat metric event");var PrechatEvent=eval(bbyPrechatEvents[divIds]);storeManager.deleteValueFromStore("sn.ct","ds")}else if(getDataStatus=="connected"&&!connectedEventFired){connectedEventFired=!0,utils.info("Firing connected metric event");var ChatConnectedEvent=eval(bbyChatConnectedEvents[divIds]);storeManager.deleteValueFromStore("sn.ct","ds")}else if(getDataStatus=="interactive"&&!intChatEventFired){intChatEventFired=!0,utils.info("Firing interactive metric event");var InteractiveChatEvent=eval(bbyInteractiveChatEvents[divIds]);storeManager.deleteValueFromStore("sn.ct","ds")}else if(getDataStatus=="feedback"&&!feedbackEventFired){feedbackEventFired=!0,utils.info("Firing feedback metric event");var FeedbackSubmitEvent=eval(bbyFeedbackSubmitEvents[divIds]);storeManager.deleteValueFromStore("sn.ct","ds")}var svdintid=storeManager.getValueFromStore("sn.ct","svdintid");svdintid!=""&&svdintid!=null&&$setData("svdintid",svdintid,!0);var svdclid=getValueFromCTCookie("svdclid");svdclid!=""&&svdclid!=null&&$setData("svdclid",svdclid,!0);var svdq=getValueFromCTCookie("svdq");svdq!=""&&svdq!=null&&$setData("svdq",svdq,!0);var svdri=getValueFromCTCookie("svdri");svdri!=""&&svdri!=null&&$setData("svdri",svdri,!0),isLocalStoreSupported&&crossXDataHandler.getLocalStorageItem("sn.ct",function(a,b){utils.info("Updating sn.ct from third party. sn.ct : "+b);try{var c=b.split(SN_CONSTANTS.KEY_SEPERATOR);for(var d=0;d<c.length;d++){var e=c[d].split(SN_CONSTANTS.KEY_VALUE_SEPERATOR)[0],f=c[d].split(SN_CONSTANTS.KEY_VALUE_SEPERATOR)[1];!$undefinedOrNull(e)&&!$undefinedOrNull(f)&&f!=""&&storeManager.setValueInStore("sn.ct",e,f)}}catch(g){utils.info("Error in copy over: "+g)}})}function stringifyCookieObj(a){var b="";for(var c in a)a.hasOwnProperty(c)&&!$undefinedOrNull(a[c])&&typeof a[c]!="object"?b=b+c+"~"+iframeContentWindow.SN.Base64Encoder.encode(a[c]):b=b+c+"~"+iframeContentWindow.SN.Base64Encoder.encode(stringifyCookieObj(a[c])),b+="|";return b.charAt(b.length-1)=="|"&&(b=b.substr(0,b.length-1)),b}function getContextData(a,b){var c={},d=".bestbuy.com";c.IP=iframeContentWindow.$geoIPAddress(),c.asid=iframeContentWindow.$activeSessionId(),c.bsid=storeManager.getValueFromStore("sn.vi","vi")+"-"+storeManager.getValueFromStore("sn.vi","as"),c.tpid=iframeContentWindow.SN.GlobalSession().getTargetPopulationId(),c.vg=iframeContentWindow.SN.GlobalSession().getVisitorGroup(),c.appid="BESTBUY_APP01_01",c.invitePage=parent.SN.Tracker.getUniquePageId().toString(),c.pcs=iframeContentWindow.$getTotalVisitCount().toString(),c.country=iframeContentWindow.$geoCountry(),c.city=iframeContentWindow.$geoCity(),c.org=iframeContentWindow.$geoOrganization(),c.worldRegion=iframeContentWindow.$geoRegion(),c.postCode=iframeContentWindow.$geoPostalCode(),c.isp=iframeContentWindow.$geoIsp(),c.browser=navigator.userAgent,c.trid=iframeContentWindow.$getData("trid"),c.locale=location.host.indexOf("espanol")>-1?"es_US":"en_US",c.rid=a,c.cSessInvite=getSessionInviteCount(),c.cSessInvite=c.cSessInvite?String(c.cSessInvite):"0",c.pName=parent.document.title,c.pURL=a=="directchat"?encodeURIComponent(parent.location.href):parent.location.href,c.cts=currentTimeInCST()+"";if(a=="BBFB_showchatbutton"||a=="BBFB_showchatbuttonGs"){d=location.host;var e="",f="",g=parent.jQuery?parent.jQuery.trim(parent.jQuery("#orderSumProdDesCol").text()).substr(0,parent.jQuery.trim(parent.jQuery("#orderSumProdDesCol").text()).indexOf("Item")).replace(/\s/g,"")||"":"";typeof parent.x2!="undefined"&&(e=parent.x2),typeof parent.rev!="undefined"&&(f=parent.rev),typeof parent.skuDetail!="undefined"&&((g==null||g=="")&&typeof parent.skuDetail.skus!="undefined"&&typeof parent.skuDetail.skus[0].title!="undefined"&&(g=parent.skuDetail.skus[0].title),(e==null||e=="")&&typeof parent.skuDetail.skus!="undefined"&&typeof parent.skuDetail.skus[0].price!="undefined"&&(e=parent.skuDetail.skus[0].price)),c.prName=g,c.prTotal=e,c.orTotal=f,c.sts=iframeContentWindow.SN.ConfigurationManager.getServerTimeStamp()+""}else parent.jQuery&&(c.prName=parent.jQuery.trim(parent.jQuery("#productsummary").find("h1").text())?escape(parent.jQuery.trim(parent.jQuery("#productsummary").find("h1").text())):"",c.plName=parent.jQuery.trim(parent.jQuery(".salenum").text())?escape(parent.jQuery.trim(parent.jQuery(".salenum").text())):"",c.prTotal=parent.jQuery.trim(parent.jQuery(".cart-product-price-total").text())?escape(parent.jQuery.trim(parent.jQuery(".cart-product-price-total").text())):"",c.orTotal=parent.jQuery.trim(parent.jQuery(".bdt-orderTotal").text())?escape(parent.jQuery.trim(parent.jQuery(".bdt-orderTotal").text())):"");return $setData("clid",b),c.clid=b,c.nemo={queue:divIdObj.queue,accountId:SN.Conf.CONST_ASSIST_ACCOUNT_ID,server:SN.Conf.CONST_ASSIST_VS_ROOT,caserver:SN.Conf.CONST_ASSIST_CA_ROOT},c=stringifyCookieObj(c),c}function getTfsonChat(){if(!$undefinedOrNull(chatWindowId)&&!chatWindowId.closed)return utils.info("Chat window is opened from current tab"),1;if(divIdObj&&divIdObj.id=="directchat")return utils.info("for Directchat, considered as chat is on"),1;var a=getValueFromCTCookie("hb")||0,b=(new Date).getTime();if(SN.CookieManager.readSNCookie("sn.tfsonchat","status")=="false"){if(b-a>=3e3)return 0}else if(b-a>=6e3)return utils.info("currTime : "+b),utils.info("heartbeat : "+a),utils.info("Assuming chat ended because heartbeat timed out."),SN.CookieManager.createSNCookie("sn.tfsonchat","status","false"),0;return utils.info("Chat is on"),1}function updateTfsOnChat(a){a==1?updateCtCookie("hb",(new Date).getTime()):updateCtCookie("hb",0)}function generateActionUrl(a){var a=a,b="www-ssl.bestbuy.com",c="chatapp.gz.js",d="https:",e={"www-ssl.bestbuy.com":"www-ssl.bestbuy.com/247/247chat.html","www.bestbuybusiness.com":"www.bestbuybusiness.com/bbfb/en/US/bb_info/content/psp247/247chat.html","bestbuybusiness.com":"bestbuybusiness.com/bbfb/en/US/bb_info/content/psp247/247chat.html","bbfb-vip-pl1-ext.bestbuy.com":"bbfb-vip-pl1-ext.bestbuy.com/bbfb-static-q03/en/US/bb_info/content/psp247/247chat.html","epro-pl.bestbuybusiness.com":"epro-pl.bestbuybusiness.com/bbfb-static-q03/en/US/bb_info/content/GeekSquad/global/psp247/247chat.html","business.geeksquad.com":"business.geeksquad.com/bbfb/en/US/bb_info/content/PILOT_3424234234236/global/psp247/247chat.html"};divIdObj.id=="px-services"?c="gs_chatapp.gz.js":divIdObj.id=="px-scheduler"?c="schedulerchatapp.gz.js":divIdObj.id=="px-recon"?c="reconchatapp.gz.js":divIdObj.id=="px-email"?c="emailchatapp.gz.js":divIdObj.id=="px-button-chat"?(b=location.host,c="bbfbchatapp.gz.js"):divIdObj.id=="px-button-chat-gs"&&(d="http:",b=location.host,c="bbfbgschatapp.gz.js");var f=d+"//"+e[b]+"#key=bestbuy-v1-001&env="+window._tfsc.env+"&cdnPath="+SN.Conf.CDN_DOMAIN+"&documentDomain="+b+"&version="+SN.Conf.CONST_CDN_VERSION+"&pspVersion=default&r="+c;return f}function launchChat(a,b){try{utils.debug("[DEBUG] - calling getContextData from launchChat");var c=getContextData(a,b),d=SN.UserAgentParser.getOSType();if(getTfsonChat()!=1){var e=generateActionUrl({ri:a,clid:b});cobrowse.clear(),!SN.UserAgentParser.isBrowser("Version")||d.search(/MacOS/i)==-1||divIdObj["id"]!="px-scheduler"&&divIdObj["id"]!="px-recon"?chatWindowId=parent.window.open(e,c,"channelmode=no, directories=no, fullscreen=no, location=no, menubar=no, resizable=no, scrollbars=no, status=no, titlebar=no, toolbar=no, top=20, left=100, height=570,width=550"):chatWindowId=parent.window.open(e,c,"channelmode=no, directories=no, fullscreen=no, location=no, menubar=no, resizable=no, scrollbars=no, status=no, titlebar=no, toolbar=no, top=20, left=100, height=600,width=550"),SN.CookieManager.createSNCookie("sn.tfsonchat","status","true"),updateTfsOnChat("1"),$setData("queue",divIdObj.queue),startChatPoller(),SN.CustomInviteManager.dismissInvite()}}catch(f){utils.errorTrack("Error in launching Chat",f.message)}}var iframeElement=document.getElementById("sn_iframe");SN.Utils.undefinedOrNull(iframeElement)&&(iframeElement=window);var iframeContentWindow=iframeElement.contentWindow,utils=iframeContentWindow.SN.Utils,SN_CONSTANTS=iframeContentWindow.SN.Constants,pspCustomTrackingUtil=iframeContentWindow.SN.PSPCustomTrackingUtil,$getData=iframeContentWindow.$getData,$setData=iframeContentWindow.$setData,storeManager=iframeContentWindow.SN.StoreManager,crossXDataHandler=iframeContentWindow.SN.CrossXDataHandler,$undefinedOrNull=iframeContentWindow.$undefinedOrNull,eventManager=iframeContentWindow.SN.EventManager,isLocalStoreSupported=!1,LOGLVL_NONE=1e3,LOGLVL_ERROR=400,LOGLVL_INFO=200,LOGLVL_DEBUG=100,webpageFilter=iframeContentWindow.SN.WebPageFilter,filterType=webpageFilter.filterTypeEnum.NONE,includeFilterMap={},excludeFilterMap={},includeFilterRegexList=[],excludeFilterRegexList=[],divIdObj=getByPageDivId();divIdObj.queue&&(parent.SN.Conf.CONST_ASSIST_DEFQUEUE=divIdObj.queue);var inviteOfferedFlag=!0,agentOfflineFlag=!0,checkAvailabilityFlag=!1,agentAvailableBBFB=!0,isBBFBPageFlag=!1,chatWindowId,cobrowse=null,reconInitialized=!1,clids={clid:""};parent.SN.Conf.ruleTypeMapping={button:"b",Btn:"b",btn:"b",proactive:"p","":"b"};var isPurchased=!1;customInitialization();var agentName,baInviteOfferedFlag=!0,qstnTabCAFlag=!0,bbyEvents={"px-mobile-help":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Click to Communicate: Chat: Mobile', prevPage: parent.track.page }); }","px-span-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Click to Communicate: Chat: Mobile', prevPage: parent.track.page }); }","px-span-checkout1-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout'}); }","px-span-checkout2-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart'}); }","px-span-checkout5-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Mobile'}); }","px-span-checkout6-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Mobile'}); }","px-chat-online":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Click to Communicate: Chat: Mobile', prevPage: parent.track.page }); }","px-span-checkout4-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart'}); }","px-span-checkout3-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout'}); }","px-mobile-misc":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Click to Communicate: Chat: Mobile', prevPage: parent.track.page }); }","px-service-page-chat":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Service Page'}); }","px-my-account":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: My Account Page'}); }","px-product-launch":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: New Product Launch'}); }","px-appliance-1":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 1'}); }","px-appliance-2":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 2'}); }","px-computing":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Computing'}); }","px-tablets-ereaders":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: TabletsEreaders'}); }","px-home-theater":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: HomeTheater'}); }","px-appliances":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliances'}); }","px-pe-entertainment":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: PeEntertainment'}); }","px-services":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Services'}); }","px-gift":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Gift'}); }","px-scheduler":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Scheduler'}); }","px-recon":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Recon'}); }","px-email":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Email'}); }","px-expertService":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: ExpertService'}); }"},bbyPrechatEvents={"px-mobile-help":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Prechat', prevPage: parent.track.page }); }","px-span-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: ''Mobile Click to Chat PDP: Prechat', prevPage: parent.track.page }); }","px-span-checkout1-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Prechat'}); }","px-span-checkout2-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Prechat'}); }","px-span-checkout5-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Mobile: Prechat'}); }","px-span-checkout6-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Mobile: Prechat'}); }","px-chat-online":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Prechat', prevPage: parent.track.page }); }","px-span-checkout4-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Prechat'}); }","px-span-checkout3-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Prechat'}); }","px-mobile-misc":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Prechat', prevPage: parent.track.page }); }","px-service-page-chat":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Service Page :Prechat'}); }","px-my-account":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: My Account Page :Prechat'}); }","px-product-launch":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: New Product Launch :Prechat'}); }","px-appliance-1":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 1:Prechat'}); }","px-appliance-2":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 2:Prechat'}); }","px-computing":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Computing :Prechat'}); }","px-tablets-ereaders":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: TabletsEreaders :Prechat'}); }","px-home-theater":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: HomeTheater :Prechat'}); }","px-appliances":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliances :Prechat'}); }","px-pe-entertainment":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: PeEntertainment :Prechat'}); }","px-services":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Services :Prechat'}); }","px-gift":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Gift :Prechat'}); }","px-scheduler":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Scheduler :Prechat'}); }","px-recon":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Recon :Prechat'}); }","px-email":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Email :Prechat'}); }","px-expertService":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: ExpertService :Prechat'}); }"},bbyChatConnectedEvents={"px-mobile-help":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Fullchat', prevPage: parent.track.page }); }","px-span-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: ''Mobile Click to Chat PDP: Fullchat', prevPage: parent.track.page }); }","px-span-checkout1-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Fullchat'}); }","px-span-checkout2-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Fullchat'}); }","px-span-checkout5-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Mobile: Fullchat'}); }","px-span-checkout6-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Mobile: Fullchat'}); }","px-chat-online":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Fullchat', prevPage: parent.track.page }); }","px-span-checkout4-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Fullchat'}); }","px-span-checkout3-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Fullchat'}); }","px-mobile-misc":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Fullchat', prevPage: parent.track.page }); }","px-service-page-chat":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Service Page :Fullchat'}); }","px-my-account":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: My Account Page :Fullchat'}); }","px-product-launch":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: New Product Launch :Fullchat'}); }","px-appliance-1":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 1:Fullchat'}); }","px-appliance-2":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 2:Fullchat'}); }","px-computing":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Computing :Fullchat'}); }","px-tablets-ereaders":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: TabletsEreaders :Fullchat'}); }","px-home-theater":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: HomeTheater :Fullchat'}); }","px-appliances":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliances :Fullchat'}); }","px-pe-entertainment":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: PeEntertainment :Fullchat'}); }","px-services":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Services :Fullchat'}); }","px-gift":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Gift :Fullchat'}); }","px-scheduler":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Scheduler :Fullchat'}); }","px-recon":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Recon :Fullchat'}); }","px-email":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Email :Fullchat'}); }","px-expertService":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: ExpertService :Fullchat'}); }"},bbyInteractiveChatEvents={"px-mobile-help":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Interactivechat', prevPage: parent.track.page }); }","px-span-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: ''Mobile Click to Chat PDP: Interactivechat', prevPage: parent.track.page }); }","px-span-checkout1-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Interactivechat'}); }","px-span-checkout2-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Interactivechat'}); }","px-span-checkout5-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Mobile: Interactivechat'}); }","px-span-checkout6-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Mobile: Interactivechat'}); }","px-chat-online":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Interactivechat', prevPage: parent.track.page }); }","px-span-checkout4-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Interactivechat'}); }","px-span-checkout3-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Interactivechat'}); }","px-mobile-misc":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Interactivechat', prevPage: parent.track.page }); }","px-service-page-chat":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Service Page :Interactivechat'}); }","px-my-account":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: My Account Page :Interactivechat'}); }","px-product-launch":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: New Product Launch :Interactivechat'}); }","px-appliance-1":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 1:Interactivechat'}); }","px-appliance-2":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 2:Interactivechat'}); }","px-computing":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Computing :Interactivechat'}); }","px-tablets-ereaders":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: TabletsEreaders :Interactivechat'}); }","px-home-theater":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: HomeTheater :Interactivechat'}); }","px-appliances":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliances :Interactivechat'}); }","px-pe-entertainment":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: PeEntertainment :Interactivechat'}); }","px-services":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Services :Interactivechat'}); }","px-gift":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Gift :Interactivechat'}); }","px-scheduler":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Scheduler :Interactivechat'}); }","px-recon":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Recon :Interactivechat'}); }","px-email":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Email :Interactivechat'}); }","px-expertService":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: ExpertService :Interactivechat'}); }"},bbyFeedbackSubmitEvents={"px-mobile-help":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Postchat', prevPage: parent.track.page }); }","px-span-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: ''Mobile Click to Chat PDP: Postchat', prevPage: parent.track.page }); }","px-span-checkout1-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Postchat'}); }","px-span-checkout2-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Postchat'}); }","px-span-checkout5-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Mobile: Postchat'}); }","px-span-checkout6-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Mobile: Postchat'}); }","px-chat-online":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Postchat', prevPage: parent.track.page }); }","px-span-checkout4-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Cart: Postchat'}); }","px-span-checkout3-chat-now":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Checkout: Postchat'}); }","px-mobile-misc":"if(parent.trackEvent) { parent.trackEvent.event('event.view', {page: 'Mobile Click to Chat', d_uberCat: parent.track.uberCatName, d_category: parent.track.d_category, templateName: 'LogMeIn Chat', clickAction: 'Mobile Click to Chat PDP: Postchat', prevPage: parent.track.page }); }","px-service-page-chat":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Service Page :Postchat'}); }","px-my-account":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: My Account Page :Postchat'}); }","px-product-launch":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: New Product Launch :Postchat'}); }","px-appliance-1":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 1:Postchat'}); }","px-appliance-2":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliance 2:Postchat'}); }","px-computing":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Computing :Postchat'}); }","px-tablets-ereaders":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: TabletsEreaders :Postchat'}); }","px-home-theater":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: HomeTheater :Postchat'}); }","px-appliances":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Appliances :Postchat'}); }","px-pe-entertainment":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: PeEntertainment :Postchat'}); }","px-services":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Services :Postchat'}); }","px-gift":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Gift :Postchat'}); }","px-scheduler":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Scheduler :Postchat'}); }","px-recon":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Recon :Postchat'}); }","px-email":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: Email :Postchat'}); }","px-expertService":"if(parent.trackEvent) { parent.trackEvent.event('event.view',{page:'Click to Communicate: Chat: ExpertService :Postchat'}); }"};init(),iframeContentWindow.SN.EventManager.observe(SN_CONSTANTS.BOOTSTRAP_COMPLETED_EVENT,function(){isMobile()&&isChattingSession()=="1"&&Initialize_ChatFramework()});var mobilecookie="",preChatEventFired=!1,connectedEventFired=!1,intChatEventFired=!1,feedbackEventFired=!1,bbyButtonClick=function(a){function c(){b++,b==1&&setTimeout(function(){bbyButtonClickCallback(),b=0},300)}var b=0;a.addEventListener?(a.addEventListener("click",c,!1),a.addEventListener("keydown",c,!1)):a.attachEvent("onclick",c)},bbyButtonClickCallback=function(){var divId=divIdObj.id,bbyEvent=eval(bbyEvents[divId])},me={renderInitcall:renderInitcall,getEncodedValue:getEncodedValue,getDecodedValue:getDecodedValue,overrideCfConfig:overrideCfConfig,track:track,getByPageDivId:getByPageDivId,isOutOfOffice:isOutOfOffice,triggerInvite:triggerInvite,fireInviteEvent:fireInviteEvent,randomUUID:randomUUID,fireStateChangeEvent:fireStateChangeEvent,fireSchedulerStateChangeEvent:fireSchedulerStateChangeEvent,getSessionInviteCount:getSessionInviteCount,getInviteTypeFromRuleId:getInviteTypeFromRuleId,objectifyCookie:objectifyCookie,stringifyCookieObj:stringifyCookieObj,captureConversions:captureConversions,accept:accept,incSessionInviteCount:incSessionInviteCount,cSessTotalInviteCount:cSessTotalInviteCount,bbyButtonClick:bbyButtonClick,getTfsonChat:getTfsonChat,macSafariSuppression:macSafariSuppression,checkoutAndURLSuppression:checkoutAndURLSuppression,setLI:setLI,getTSLI:getTSLI,TSLIsuppression:TSLIsuppression,directChat:directChat,getContextData:getContextData,isIPBlocked:isIPBlocked,blueAssistQuestionClickCallback:blueAssistQuestionClickCallback,blueAssistChatNowClickCallback:blueAssistChatNowClickCallback,isBlueAssistChat:isBlueAssistChat,isBlueAssistEnabled:isBlueAssistEnabled,isInviteDeclined:isInviteDeclined,isBBYEvent:isBBYEvent,isChattingSession:isChattingSession,quickHideAddressBar:quickHideAddressBar,isMobile:isMobile,initializeMobileChat:initializeMobileChat,isMobileCustomButtonEnabled:isMobileCustomButtonEnabled,mobileSiteLoaded:mobileSiteLoaded};return me},SN._tfscFunctions=function(){function a(){return""}function b(){return SN.Conf.CONST_ASSIST_DEFQUEUE}function c(){return"tagged_page"}function d(){return"wti"}var e={getPageIdExpression:c,getWebTrackIdExpression:d,$getNavPath:a,$getQueue:b};return e}();if(SN.VisitorFiltering.IP_ADDRESS_BLOCK_ENABLED&&SN.VisitorFiltering.getIPFlagInDatastore()===null)try{SN.VisitorFiltering.findKeyInList()}catch(e){console&&console.log&&console.log("FindKeyInList Api error: "+e)}load247px()